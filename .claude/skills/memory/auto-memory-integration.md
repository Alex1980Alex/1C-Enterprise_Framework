# Auto Memory Integration Skill

Автоматическая интеграция с Memory MCP для сохранения и извлечения знаний.

## Когда использовать этот навык

1. **При получении новой информации:**
   - Чтение документации
   - Анализ кода
   - Результаты поиска
   - Ответы от внешних сервисов

2. **Перед ответом на вопросы:**
   - Поиск релевантной информации в памяти
   - Проверка предыдущего контекста
   - Извлечение сохраненных знаний

3. **При работе с проектом:**
   - Сохранение архитектурных решений
   - Документирование API
   - Фиксация бизнес-логики

## Процесс работы

### 1. Проверка памяти перед ответом
```
ВСЕГДА выполнять перед ответом:
1. mcp__memory__search_nodes({query: "релевантный поисковый запрос"})
2. Проанализировать результаты
3. Использовать найденную информацию в ответе
```

### 2. Сохранение важной информации
```
После получения важных данных:
1. Определить тип сущности (проект, модуль, API, концепция)
2. Создать или обновить сущность в памяти
3. Добавить наблюдения с timestamp
```

### 3. Категории сохраняемой информации

#### Код и архитектура
- Структура проекта
- Назначение модулей
- API endpoints
- Паттерны проектирования

#### Документация
- Инструкции по настройке
- Примеры использования
- Troubleshooting решения
- Best practices

#### Контекст проекта
- Бизнес-требования
- Решения и их обоснование
- Известные проблемы
- Планы развития

## Примеры использования

### Пример 1: Сохранение информации о новом модуле
```javascript
// После анализа нового модуля
mcp__memory__create_entities({
  entities: [{
    name: "Auth Module",
    entityType: "code_module",
    observations: [
      "Location: src/auth/",
      "Purpose: JWT-based authentication",
      "Dependencies: jsonwebtoken, bcrypt",
      "Main functions: login(), verify(), refresh()",
      "Created: 2025-10-31"
    ]
  }]
})
```

### Пример 2: Поиск информации перед ответом
```javascript
// Перед ответом на вопрос об аутентификации
mcp__memory__search_nodes({
  query: "authentication JWT auth module"
})

// Проанализировать результаты и использовать в ответе
```

### Пример 3: Обновление существующей информации
```javascript
// Добавление новых наблюдений к существующей сущности
mcp__memory__add_observations({
  observations: [{
    entityName: "Auth Module",
    contents: [
      "Added refresh token rotation (2025-10-31)",
      "Improved error handling for expired tokens",
      "See commit: abc123"
    ]
  }]
})
```

## Автоматизация через хуки

Система использует хуки для автоматических напоминаний:

### Pre-prompt hook
- Напоминает проверить память перед ответом
- Проверяет доступность Memory MCP
- Выводит статус конфигурации

### Post-tool-result hook
- Напоминает сохранить важную информацию
- Срабатывает после Read, Grep, WebFetch, и др.
- Подсказывает соответствующие MCP функции

## Best Practices

1. **Структурируйте сущности:**
   - Используйте осмысленные имена
   - Указывайте точные типы
   - Группируйте связанные наблюдения

2. **Добавляйте контекст:**
   - Даты изменений
   - Ссылки на коммиты
   - Причины решений
   - Авторы изменений

3. **Поддерживайте актуальность:**
   - Обновляйте устаревшую информацию
   - Удаляйте неактуальные сущности
   - Добавляйте временные метки

4. **Используйте связи:**
   - Создавайте отношения между сущностями
   - Документируйте зависимости
   - Отслеживайте иерархию

## Типы сущностей

### Рекомендуемые типы
- `project` - проект в целом
- `module` - модуль/компонент
- `api_endpoint` - API endpoint
- `configuration` - настройка/конфигурация
- `tool` - инструмент/утилита
- `concept` - концепция/паттерн
- `issue` - проблема/баг
- `decision` - архитектурное решение
- `dependency` - зависимость

## Интеграция с workflow

1. **Начало работы над задачей:**
   ```javascript
   // Поиск релевантного контекста
   mcp__memory__search_nodes({query: "task context dependencies"})
   ```

2. **В процессе разработки:**
   ```javascript
   // Сохранение промежуточных результатов
   mcp__memory__add_observations({
     observations: [{
       entityName: "Current Task",
       contents: ["Progress update", "Blockers", "Next steps"]
     }]
   })
   ```

3. **Завершение задачи:**
   ```javascript
   // Сохранение итоговых результатов
   mcp__memory__create_entities({
     entities: [{
       name: "Completed Feature X",
       entityType: "feature",
       observations: ["Implementation details", "Testing notes", "Documentation links"]
     }]
   })
   ```

## Troubleshooting

### Memory MCP недоступен
1. Проверить конфигурацию: `.claude/mcp-configs/memory-config.json`
2. Проверить settings: `.claude/settings.local.json`
3. Перезапустить Claude Code

### Не находит сохраненную информацию
1. Использовать более общие поисковые запросы
2. Проверить имена сущностей: `mcp__memory__read_graph()`
3. Использовать разные формулировки

### Дублирование сущностей
1. Сначала искать существующие: `mcp__memory__search_nodes()`
2. Обновлять существующие вместо создания новых
3. Использовать консистентные имена

## См. также

- [Memory MCP Documentation](../../docs/MCP-Complete-Setup-Guide.md)
- [Hooks System](./README.md)
- [Task Master Integration](../../docs/Task-Master-Compliance-Architecture.md)
