# Serena MCP - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

> **–ü—Ä–æ–±–ª–µ–º–∞:** Serena MCP –Ω–µ –≤–∏–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤ BSL —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ 251014_GKSTCPLK-1788
> **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–µ–∫—Ç –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ Serena
> **–î–∞—Ç–∞:** 2025-10-23

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
```bash
Active project: 1C-Enterprise_Framework
Available projects:
  ‚úÖ 250928_GKSTCPLK-1697
  ‚úÖ 251001_GKSTCPLK-1716
  ‚úÖ 251007_GKSTCPLK-1765
  ‚úÖ 251008_GKSTCPLK-1763
  ‚ùå 251014_GKSTCPLK-1788  # <- –ù–ï –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù!
  ‚úÖ demo-accounting
  ‚úÖ example-1c-project
```

### –°–∏–º–ø—Ç–æ–º—ã:
- `mcp__serena__get_symbols_overview` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `mcp__serena__find_symbol` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏
- Language Server –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ Serena

### üöÄ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –°–ü–û–°–û–ë (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):

```bash
# –ò–∑ –∫–æ—Ä–Ω—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
bash scripts/serena-auto-init-project.sh "src/projects/configuration/251014_GKSTCPLK-1788" "251014_GKSTCPLK-1788"

# –ò–õ–ò –Ω–∞ Windows
scripts\serena-auto-init-project.bat "src\projects\configuration\251014_GKSTCPLK-1788" "251014_GKSTCPLK-1788"
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç:
- `.serena/project.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Serena
- `.serena/bsl-config.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ BSL Language Server
- `.serena/.gitignore` - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞

### üìù –†–£–ß–ù–û–ô –°–ü–û–°–û–ë:

<details>
<summary>–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ä—É—á–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é</summary>

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å .serena –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—Ä–æ–µ–∫—Ç–µ

```bash
cd "d:\1C-Enterprise_Framework\src\projects\configuration\251014_GKSTCPLK-1788"
mkdir .serena
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å project.yml

```bash
cd .serena
cat > project.yml << 'EOF'
# Serena project configuration for 251014_GKSTCPLK-1788
language: bsl

ignore_all_files_in_gitignore: true
ignored_paths: []
read_only: false
excluded_tools: []
initial_prompt: ""
project_name: "251014_GKSTCPLK-1788"
EOF
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å bsl-config.json

```bash
cat > bsl-config.json << 'EOF'
{
  "language": "bsl",
  "project_path": "d:\\1C-Enterprise_Framework\\src\\projects\\configuration\\251014_GKSTCPLK-1788",
  "source_paths": [
    "src"
  ],
  "lsp_enabled": true
}
EOF
```

</details>

### –®–∞–≥ 4: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Serena

```javascript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ü–û–õ–ù–´–ô –ü–£–¢–¨ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
mcp__serena__activate_project({
  project: "d:/1C-Enterprise_Framework/src/projects/configuration/251014_GKSTCPLK-1788"
})

// –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è
mcp__serena__activate_project({
  project: "251014_GKSTCPLK-1788"
})
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–æ–µ–∫—Ç

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏ –æ—Ç –∫–æ—Ä–Ω—è:

```javascript
mcp__serena__get_symbols_overview({
  relative_path: "src/projects/configuration/251014_GKSTCPLK-1788/src/DataProcessors/–≥–∫—Å_–ê–†–ú–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π–ö–æ–º–ø–æ–∑–∏—Ç/Ext/ObjectModule.bsl"
})
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- ‚úÖ –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –î–ª–∏–Ω–Ω—ã–µ –ø—É—Ç–∏
- ‚ùå Language Server –º–æ–∂–µ—Ç –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–∞–±–æ—Ç–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AST-grep MCP (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)

AST-grep –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Language Server –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º –¥–µ—Ä–µ–≤–æ–º:

### –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä –≤ BSL:

```javascript
mcp__ast-grep-mcp__ast_grep({
  pattern: "–§—É–Ω–∫—Ü–∏—è $NAME($ARGS)",
  path: "src/projects/configuration/251014_GKSTCPLK-1788",
  bsl_type: "procedures"
})
```

### –ü–æ–∏—Å–∫ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

```javascript
mcp__ast-grep-mcp__ast_grep({
  pattern: "–§—É–Ω–∫—Ü–∏—è $NAME($ARGS) –≠–∫—Å–ø–æ—Ä—Ç",
  path: "src/projects/configuration/251014_GKSTCPLK-1788",
  bsl_type: "functions",
  export_only: true
})
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AST-grep:
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç Language Server
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ BSL —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ ($NAME, $ARGS)

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –ù–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –ù–µ –≤–∏–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
- ‚ùå –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

```javascript
mcp__serena__get_current_config()
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º.

### –¢–µ—Å—Ç 2: –ü–æ–ª—É—á–∏—Ç—å –æ–±–∑–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤

```javascript
mcp__serena__get_symbols_overview({
  relative_path: "Ext/ObjectModule.bsl"
})
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

### –¢–µ—Å—Ç 3: –ù–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

```javascript
mcp__serena__find_symbol({
  name_path: "–¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞–î–∞–Ω–Ω—ã–µ–î–ª—è–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π",
  relative_path: "Ext/ObjectModule.bsl",
  include_body: true
})
```

–î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–µ—Ä–Ω—É—Ç—å –µ—ë —Ç–µ–ª–æ.

---

## üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚≠ê **–î–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞:**
–ò—Å–ø–æ–ª—å–∑—É–π **–†–µ—à–µ–Ω–∏–µ 2** (—Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–æ–µ–∫—Ç) - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É.

### ‚≠ê **–î–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ 251014_GKSTCPLK-1788:**
–ò—Å–ø–æ–ª—å–∑—É–π **–†–µ—à–µ–Ω–∏–µ 1** (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞) - —É–¥–æ–±–Ω–µ–µ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

### ‚≠ê **–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –±–µ–∑ Language Server:**
–ò—Å–ø–æ–ª—å–∑—É–π **–†–µ—à–µ–Ω–∏–µ 3** (AST-grep MCP) - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫.

---

## üö´ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è BSL Language Server

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

BSL Language Server –º–æ–∂–µ—Ç –ù–ï —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å—Ç—Ä–æ–∫–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `|`):

```bsl
–§—É–Ω–∫—Ü–∏—è –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞()
    –í–æ–∑–≤—Ä–∞—Ç
    "–í–´–ë–†–ê–¢–¨
    |   –ü–æ–ª–µ1,
    |   –ü–æ–ª–µ2
    |–ò–ó
    |   –¢–∞–±–ª–∏—Ü–∞";
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏
```

**Workaround:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AST-grep MCP –¥–ª—è —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Read, Edit, Grep)

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ MCP Priority Rules

–î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤ `.claude/mcp-priority-rules.md`:

**–ï–°–õ–ò:** Serena MCP –Ω–µ –≤–∏–¥–∏—Ç —Å–∏–º–≤–æ–ª—ã –≤ BSL —Ñ–∞–π–ª–µ
**–¢–û:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AST-grep MCP ‚Üí Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

---

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ
**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-10-23
