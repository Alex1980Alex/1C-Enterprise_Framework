# BSL Code Search API - Environment Configuration
# Конфигурация переменных окружения для API

# ================================================================
# API AUTHENTICATION (ОПЦИОНАЛЬНАЯ АУТЕНТИФИКАЦИЯ)
# ================================================================

# Если переменные API_KEY или API_KEYS не установлены,
# API будет работать БЕЗ аутентификации (режим разработки)

# Вариант 1: Один API ключ
# API_KEY=your-secret-api-key-here

# Вариант 2: Несколько API ключей (через запятую)
# API_KEYS=key1-for-frontend,key2-for-backend,key3-for-mobile

# Генерация нового ключа (Python):
# python -c "import secrets; print(secrets.token_urlsafe(32))"

# ================================================================
# REDIS CACHE (ОПЦИОНАЛЬНОЕ КЕШИРОВАНИЕ)
# ================================================================

# Если переменные не установлены, API работает БЕЗ кеширования
# Кеширование значительно ускоряет повторные запросы

# Redis сервер (по умолчанию: localhost:6379)
# REDIS_HOST=localhost
# REDIS_PORT=6379

# Redis database number (по умолчанию: 0)
# REDIS_DB=0

# Redis пароль (если требуется)
# REDIS_PASSWORD=your-redis-password

# Время жизни кеша в секундах (по умолчанию: 3600 = 1 час)
# REDIS_TTL=3600

# Установка Redis:
# Windows: https://github.com/microsoftarchive/redis/releases
# Linux: sudo apt-get install redis-server
# MacOS: brew install redis
# Docker: docker run -d -p 6379:6379 redis:latest

# ================================================================
# QDRANT VECTOR DATABASE
# ================================================================

# Qdrant сервер (по умолчанию: localhost:6333)
QDRANT_HOST=localhost
QDRANT_PORT=6333

# Название коллекции (по умолчанию: bsl_code)
QDRANT_COLLECTION=bsl_code

# ================================================================
# OLLAMA EMBEDDING SERVICE
# ================================================================

# Ollama сервер (по умолчанию: http://localhost:11434)
OLLAMA_HOST=http://localhost:11434

# Модель embeddings (по умолчанию: nomic-embed-text:latest)
OLLAMA_MODEL=nomic-embed-text:latest

# ================================================================
# NEO4J GRAPH DATABASE (для гибридного поиска)
# ================================================================

# Neo4j connection
NEO4J_URI=neo4j://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password

# ================================================================
# API SERVER CONFIGURATION
# ================================================================

# Хост и порт API сервера
API_HOST=0.0.0.0
API_PORT=8000

# Режим разработки (reload при изменениях кода)
API_RELOAD=true

# Уровень логирования (debug, info, warning, error)
LOG_LEVEL=info

# ================================================================
# CORS CONFIGURATION
# ================================================================

# Разрешенные origins для CORS (через запятую)
# В production укажите конкретные домены вместо *
CORS_ORIGINS=*

# ================================================================
# PRODUCTION НАСТРОЙКИ
# ================================================================

# Для production рекомендуется:
# 1. Установить API_KEY или API_KEYS
# 2. Ограничить CORS_ORIGINS конкретными доменами
# 3. Использовать HTTPS reverse proxy (nginx)
# 4. Установить LOG_LEVEL=warning
# 5. Установить API_RELOAD=false
# 6. Использовать несколько workers: uvicorn --workers 4

# Пример production конфигурации:
# API_KEYS=prod-key-1,prod-key-2,prod-key-3
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
# LOG_LEVEL=warning
# API_RELOAD=false
