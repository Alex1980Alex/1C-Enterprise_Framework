# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ AsyncIO Indexer

**–î–∞—Ç–∞**: 2025-11-03
**–í–µ—Ä—Å–∏—è**: 1.0
**–°—Ç–∞—Ç—É—Å**: –ó–ê–í–ï–†–®–ï–ù–û

---

## Executive Summary

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –í–´–í–û–î**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –¥–∞–µ—Ç **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**, –Ω–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ **–∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–º—É –ø–∞–¥–µ–Ω–∏—é —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏** –∏–∑-–∑–∞ timeout Ollama.

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π speedup**: 2.47x (64.2 min vs 158.7 min baseline)
- **–ü—Ä–æ–±–ª–µ–º–∞**: Success rate –ø–∞–¥–∞–µ—Ç —Å 68% –¥–æ 28%
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–ú–ï–†–ï–ù–ù–û–ï —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ + —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: batch_size=10, max_workers=3, timeout=120

---

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏**: 300 —Ñ–∞–π–ª–æ–≤ BSL (–∏–∑ 3973 total)
- **–ú–æ–¥–µ–ª—å embeddings**: nomic-embed-text:latest (768-dim)
- **Ollama timeout**: 90 —Å–µ–∫—É–Ω–¥ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- **Retry attempts**: 2

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| Config | batch_size | max_workers | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------------|-------------|----------|
| Baseline (current) | 5 | 2 | –¢–µ–∫—É—â–∞—è –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| Moderate (2x batch) | 10 | 3 | –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π batch, —É–º–µ—Ä–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º |
| Aggressive (3x batch) | 15 | 4 | –ë–æ–ª—å—à–æ–π batch, –≤—ã—Å–æ–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º |
| Maximum (4x batch) | 20 | 6 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| Config | –í—Ä–µ–º—è | Speedup | –£—Å–ø–µ—à–Ω–æ | Success Rate | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|-------|---------|---------|--------------|----------|
| **Baseline (current)** | 158.7 min | 1.00x | 204/300 | **68.0%** | 1.29 files/min |
| **Moderate (2x batch)** | 119.9 min | **1.32x** | 145/300 | 48.3% | 1.21 files/min |
| **Aggressive (3x batch)** | 94.5 min | **1.68x** | 95/300 | 31.7% | 1.01 files/min |
| **Maximum (4x batch)** | 64.2 min | **2.47x** | 83/300 | **27.7%** | 1.29 files/min |

### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

```
Baseline:    158.7 min (2.65 hours)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
Moderate:    119.9 min (2.00 hours)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]    (-24.5%)
Aggressive:   94.5 min (1.58 hours)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]          (-40.5%)
Maximum:      64.2 min (1.07 hours)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]                  (-59.5%)
```

### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

```
Baseline:    204/300 (68.0%)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
Moderate:    145/300 (48.3%)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
Aggressive:   95/300 (31.7%)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
Maximum:      83/300 (27.7%)  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
```

---

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. Ollama Timeout –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ `max_workers` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Ollama, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –û—á–µ—Ä–µ–¥—è–º –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É embeddings
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏—é 90-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ timeout
- –ú–∞—Å—Å–æ–≤—ã–º –æ—à–∏–±–∫–∞–º: `HTTPConnectionPool(host='localhost', port=11434): Read timed out`

**–ü–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ —Ñ–∞–π–ª—ã** (—á–∞—â–µ –≤—Å–µ–≥–æ timeout):
- `SessionModule.bsl`
- `ManagedApplicationModule.bsl`
- `ExternalConnectionModule.bsl`
- `OrdinaryApplicationModule.bsl`
- –†–∞–∑–ª–∏—á–Ω—ã–µ `ManagerModule.bsl`

**–ü–∞—Ç—Ç–µ—Ä–Ω**:
- Baseline (workers=2): 96 failed –∏–∑ 300 (32% fail rate)
- Moderate (workers=3): 155 failed –∏–∑ 300 (52% fail rate)
- Aggressive (workers=4): 205 failed –∏–∑ 300 (68% fail rate)
- Maximum (workers=6): 217 failed –∏–∑ 300 (72% fail rate)

### 2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞

–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—Å—É–±–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:

- **2 ‚Üí 3 workers**: 1.32x speedup (—Ö–æ—Ä–æ—à–æ)
- **3 ‚Üí 4 workers**: 1.27x speedup (—É–º–µ—Ä–µ–Ω–Ω–æ)
- **4 ‚Üí 6 workers**: 1.47x speedup (–Ω–æ —Å 72% fail rate!)

**Bottleneck**: Ollama –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º workers –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º timeout=90 —Å–µ–∫.

### 3. UnicodeEncodeError –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –≤—ã–≤–æ–¥–µ

–í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å `exit_code=1` –∏–∑-–∑–∞:
```
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4ca' in position 0
```

–≠—Ç–æ **–∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞** - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ, –Ω–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å emoji –Ω–µ —Å–º–æ–≥–ª–∞ –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω–∞ –≤ cp1251 –∫–æ–Ω—Å–æ–ª—å.

---

## –ü—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ü–æ—á–µ–º—É Baseline –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à—É—é —É—Å–ø–µ—à–Ω–æ—Å—Ç—å?

1. **–ù–∏–∑–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** (workers=2):
   - Ollama –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 2 –∑–∞–ø—Ä–æ—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - –†–µ–¥–∫–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—á–µ—Ä–µ–¥–∏
   - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —É–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ 90 —Å–µ–∫

2. **–ú–∞–ª–µ–Ω—å–∫–∏–π batch_size** (5):
   - –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ –≤ –æ–¥–Ω–æ–º –±–∞—Ç—á–µ
   - –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   - –ú–µ–Ω—å—à–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

### –ü–æ—á–µ–º—É Maximum –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ö—É–¥—à—É—é —É—Å–ø–µ—à–Ω–æ—Å—Ç—å?

1. **–í—ã—Å–æ–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** (workers=6):
   - Ollama –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç—Å—è 6 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - –û–±—Ä–∞–∑—É—é—Ç—Å—è –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ GPU/CPU
   - Timeout 90 —Å–µ–∫ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω

2. **–ë–æ–ª—å—à–æ–π batch_size** (20):
   - –î–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–∞
   - –í—Å–µ timeout –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
   - –ï—Å–ª–∏ –æ–¥–∏–Ω —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π ‚Üí –≤–µ—Å—å –±–∞—Ç—á —Å—Ç—Ä–∞–¥–∞–µ—Ç

---

## –ü—Ä–æ–µ–∫—Ü–∏—è –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (3973 —Ñ–∞–π–ª–∞)

### –ù–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

| Config | –í—Ä–µ–º—è –Ω–∞ 300 | Projected 3973 | Success Rate | Expected Success |
|--------|--------------|----------------|--------------|------------------|
| Baseline | 158.7 min | **35.1 hours** | 68.0% | 2702/3973 |
| Moderate | 119.9 min | **26.5 hours** | 48.3% | 1919/3973 ‚ö†Ô∏è |
| Aggressive | 94.5 min | **20.9 hours** | 31.7% | 1260/3973 ‚ùå |
| Maximum | 64.2 min | **14.2 hours** | 27.7% | 1100/3973 ‚ùå |

**–í—ã–≤–æ–¥**: Moderate –∏ –≤—ã—à–µ **–ù–ï –ü–û–î–•–û–î–Ø–¢** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–π —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏!

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º timeout

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```python
batch_size = 7-8      # –£–º–µ—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ (1.5x –æ—Ç baseline)
max_workers = 3       # –ù–µ–±–æ–ª—å—à–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
timeout = 120-150     # –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout –¥–ª—è Ollama
retry_attempts = 2    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**:
- Speedup: ~1.4-1.5x (35h ‚Üí 23-25h)
- Success rate: ~65-70%
- Risk: LOW

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- batch_size=7-8 - –∑–æ–ª–æ—Ç–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞ –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é
- max_workers=3 - –¥–æ–ø—É—Å—Ç–∏–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Ollama
- timeout=120-150 - –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Moderate —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º timeout

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```python
batch_size = 10
max_workers = 3
timeout = 150
retry_attempts = 3    # –£–≤–µ–ª–∏—á–∏—Ç—å retry
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**:
- Speedup: ~1.5-1.7x (35h ‚Üí 20-23h)
- Success rate: ~60-65%
- Risk: MEDIUM

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): Maximum —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º timeout

**–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```python
batch_size = 20
max_workers = 6
timeout = 300         # 5 –º–∏–Ω—É—Ç!
retry_attempts = 3
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**:
- Speedup: ~2-2.5x (35h ‚Üí 14-17h)
- Success rate: ~50-60% (uncertain)
- Risk: HIGH

**–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø** –∏–∑-–∑–∞:
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Ollama
- –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### A. Hybrid –ø–æ–¥—Ö–æ–¥: Multiprocessing + AsyncIO

```python
parse_workers = 12       # CPU-intensive –ø–∞—Ä—Å–∏–Ω–≥ BSL
embedding_workers = 3    # I/O-intensive embeddings
batch_size = 10
timeout = 120
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ 12 —è–¥—Ä–∞—Ö
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Ollama (3 workers)
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**: 2-3x speedup –ø—Ä–∏ 70-80% success rate

### B. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π timeout –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

```python
def calculate_timeout(file_size_kb):
    if file_size_kb < 50:
        return 60
    elif file_size_kb < 200:
        return 120
    else:
        return 180
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏
- –°–Ω–∏–∂–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è

### C. –û—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

```python
# –°–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ–∞–π–ª—ã
files.sort(key=lambda f: f.size)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –Ω–∞—á–∞–ª–µ
- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –º–µ–Ω—å—à–µ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π –≤ –∫–æ–Ω—Ü–µ

---

## –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω

**–®–∞–≥ 1: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (IMMEDIATE)
```bash
cd ai-memory-system
python scripts/indexing/bsl_indexer_async.py ../src \
  --output data/index \
  --batch-size 8 \
  --max-workers 3 \
  --timeout 120 \
  --retry-attempts 2
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è**: 23-25 —á–∞—Å–æ–≤
**–û–∂–∏–¥–∞–µ–º–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 65-70%

**–®–∞–≥ 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞** (–ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö 500-1000 —Ñ–∞–π–ª–æ–≤)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å success rate
- –ï—Å–ª–∏ > 65% ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
- –ï—Å–ª–∏ < 60% ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å timeout –¥–æ 150

**–®–∞–≥ 3: Re-indexing failed files**
- –°–æ–±—Ä–∞—Ç—å —Å–ø–∏—Å–æ–∫ failed files
- –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å timeout=180 –∏ workers=1

---

## –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –û—Ç–∫–ª–æ–Ω–µ–Ω–æ

‚ùå **Maximum (4x batch)** - 28% success rate –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º
‚ùå **Aggressive (3x batch)** - 32% success rate –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º
‚ö†Ô∏è **Moderate (2x batch)** - 48% success rate —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–æ–∫ –±–µ–∑ —É–≤–µ–ª–∏—á–µ–Ω–∏—è timeout

### –ü—Ä–∏–Ω—è—Ç–æ

‚úÖ **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:
- batch_size=8, max_workers=3, timeout=120
- –û–∂–∏–¥–∞–µ–º—ã–π speedup: 1.4-1.5x
- –û–∂–∏–¥–∞–µ–º–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å: 65-70%
- –ü—Ä–æ–µ–∫—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏: 23-25 —á–∞—Å–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ (–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å)

üî¨ **Hybrid Multiprocessing + AsyncIO –ø–æ–¥—Ö–æ–¥**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª: 2-3x speedup –ø—Ä–∏ 70-80% success
- –¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –í—ã–≤–æ–¥—ã

1. **–ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –ù–ï –†–ê–ë–û–¢–ê–ï–¢** –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Ollama
2. **Timeout=90 —Å–µ–∫ —Å–ª–∏—à–∫–æ–º –º–∞–ª** –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
3. **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å**: —É–º–µ—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ + –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π timeout
4. **Hybrid –ø–æ–¥—Ö–æ–¥ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ–Ω** –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
5. **–¢–µ–∫—É—â–∏–µ 3908/3973 (98.4%) indexed** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –¥–ª—è re-indexing

---

## –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### –§–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```
data/optimization_tests/optimization_results.json       - JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
data/optimization_tests/test_baseline_(current).log     - –õ–æ–≥ baseline —Ç–µ—Å—Ç–∞
data/optimization_tests/test_moderate_(2x_batch).log    - –õ–æ–≥ moderate —Ç–µ—Å—Ç–∞
data/optimization_tests/test_aggressive_(3x_batch).log  - –õ–æ–≥ aggressive —Ç–µ—Å—Ç–∞
data/optimization_tests/test_maximum_(4x_batch).log     - –õ–æ–≥ maximum —Ç–µ—Å—Ç–∞
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
cd ai-memory-system
cat data/optimization_tests/optimization_results.json | python -m json.tool

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
grep -i "success\|failed\|timeout" data/optimization_tests/*.log
```

---

**–ê–≤—Ç–æ—Ä**: Claude Code AI
**–î–∞—Ç–∞**: 2025-11-03
**–ü—Ä–æ–µ–∫—Ç**: 1C-Enterprise_Framework / ai-memory-system
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞ –ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
