# 1C Framework Docs MCP Server

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# Windows
start-mcp-server.bat

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Python
python mcp_server.py
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ MCP

```python
# –ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
mcp__1c-framework-docs__search_docs(
    query="–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞",
    limit=5,
    search_type="hybrid"  # fulltext | semantic | hybrid
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
mcp__1c-framework-docs__get_stats()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ ID
mcp__1c-framework-docs__get_document(document_id="doc_123")

# –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
mcp__1c-framework-docs__reindex_docs(force=False)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
docs-mcp/
‚îú‚îÄ‚îÄ mcp_server.py           # MCP —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ hybrid_search_engine.py # –ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫
‚îú‚îÄ‚îÄ start-mcp-server.bat    # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ cache/                  # –ö—ç—à –∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ docs-mcp/
‚îÇ       ‚îî‚îÄ‚îÄ hybrid_search.db
‚îú‚îÄ‚îÄ IMPROVEMENTS.md         # –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîç –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞

### 1. –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π (fulltext)
```python
search_docs(query="MCP —Å–µ—Ä–≤–µ—Ä", search_type="fulltext")
```
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite FTS5
- –ë—ã—Å—Ç—Ä—ã–π –∏ —Ç–æ—á–Ω—ã–π
- –õ—É—á—à–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç BM25 —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π (semantic)
```python
search_docs(query="–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é", search_type="semantic")
```
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç sentence-transformers
- –ü–æ–Ω–∏–º–∞–µ—Ç —Å–º—ã—Å–ª –∑–∞–ø—Ä–æ—Å–∞
- –õ—É—á—à–µ –¥–ª—è –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –¢—Ä–µ–±—É–µ—Ç –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

### 3. –ì–∏–±—Ä–∏–¥–Ω—ã–π (hybrid) - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
```python
search_docs(query="–ø—Ä–∏–º–µ—Ä—ã hooks", search_type="hybrid")
```
- –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç fulltext (70%) + semantic (30%)
- –õ—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Python path
PYTHONPATH=D:/1C-Enterprise_Framework/scripts/docs-mcp

# –ö–æ–¥–∏—Ä–æ–≤–∫–∞
PYTHONIOENCODING=utf-8

# –ü—É—Ç—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
DOCS_ROOT=D:/1C-Enterprise_Framework/docs
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Claude Code

–í `.claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "1c-framework-docs": {
      "command": "cmd.exe",
      "args": [
        "/c",
        "D:/1C-Enterprise_Framework/scripts/docs-mcp/start-mcp-server.bat"
      ],
      "cwd": "D:/1C-Enterprise_Framework/scripts/docs-mcp",
      "timeout": 30000
    }
  }
}
```

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** —á–µ—Ä–µ–∑ SQLite FTS5
‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** —á–µ—Ä–µ–∑ sentence-transformers
‚úÖ **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫** —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å graceful degradation
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Python –ø–∞–∫–µ—Ç—ã

```bash
# –ë–∞–∑–æ–≤—ã–µ
python >= 3.8
sqlite3 (–≤—Å—Ç—Ä–æ–µ–Ω)

# MCP —Å–µ—Ä–≤–µ—Ä
mcp
anyio

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
sentence-transformers
numpy
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install mcp anyio
pip install sentence-transformers numpy  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

## üìñ API Reference

### search_docs

–ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `query: str` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `limit: int` - –º–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- `search_type: str` - —Ç–∏–ø –ø–æ–∏—Å–∫–∞: "fulltext" | "semantic" | "hybrid"

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
[
  {
    "document": {
      "id": "doc_123",
      "title": "MCP Configuration Guide",
      "path": "docs/MCP-Configuration-Guide.md",
      "size": 15234,
      "tags": ["mcp", "configuration"]
    },
    "score": 0.85,
    "match_type": "hybrid",
    "snippet": "...–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞..."
  }
]
```

### get_document

–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ ID.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `document_id: str` - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞

### get_stats

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–Ω–¥–µ–∫—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
  "total_documents": 45,
  "documents_with_embeddings": 45,
  "unique_tags": 7,
  "database_size": "381 KB",
  "embeddings_enabled": True,
  "search_types": ["fulltext", "semantic", "hybrid"]
}
```

### reindex_docs

–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `force: bool` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: False)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "no such column"

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ë–î –∏ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å:
```bash
del cache\docs-mcp\hybrid_search.db
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```

### –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install sentence-transformers numpy
```

### –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –±—ã—Å—Ç—Ä–µ–µ

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:** ~10-50ms
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:** ~100-500ms (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫:** ~150-600ms
- **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** ~500-2000ms

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–°–º. [IMPROVEMENTS.md](./IMPROVEMENTS.md) –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-28

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ 1C-Enterprise_Framework.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
