# ‚úÖ –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´: AST-grep MCP –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## üöÄ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–° –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### AST-grep MCP Status:
```yaml
Core_Tool: "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (v0.39.5)"
MCP_Server: "‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω, —Å–æ–±—Ä–∞–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ JSON-RPC"  
Claude_Integration: "‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ MCP"
BSL_Support: "‚úÖ –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º"
Tree_Sitter_BSL: "‚úÖ DLL —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞"
Fallback_Search: "‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ"
```

## ‚úÖ –†–ï–®–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå ‚Üí ‚úÖ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω
- **–ë—ã–ª–æ**: `mcp__ast-grep__ast_grep –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ Claude`
- **–†–µ—à–µ–Ω–∏–µ**: MCP —Å–µ—Ä–≤–µ—Ä —Å–æ–±—Ä–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `ast_grep` –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ MCP

### 2. ‚ö†Ô∏è BSL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è  
- **–ë—ã–ª–æ**: `–ø–∞—Ç—Ç–µ—Ä–Ω—ã –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ $name($$$) –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞`
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AST-grep —Å fallback –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 3. ‚úÖ Tree-sitter BSL –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **–ë—ã–ª–æ**: `Tree-sitter BSL –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω`
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞–π–¥–µ–Ω–∞ –≥–æ—Ç–æ–≤–∞—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è `bsl.dll`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ DLL –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

## üõ†Ô∏è –ù–ê–°–¢–†–û–ô–ö–ò –ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò

### MCP Server Configuration
```json
{
  "mcpServers": {
    "ast-grep": {
      "command": "node",
      "args": ["mcp-ast-grep/dist/index.js"],
      "env": {},
      "enabled": true
    }
  }
}
```

### AST-grep Configuration (`.ast-grep/sgconfig.yml`)
```yaml
languages:
  bsl:
    file_extensions: [.bsl, .os]
    tree_sitter_lib: ./tree-sitter-bsl/bsl.dll
    scope: source.bsl

rules:
  - id: find-procedures
    pattern: '–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ $name($$$)'
    language: bsl
  - id: find-functions  
    pattern: '–§—É–Ω–∫—Ü–∏—è $name($$$)'
    language: bsl
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –î–æ—Å—Ç—É–ø–Ω—ã–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: `ast_grep`
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏**: 20+ –≤–∫–ª—é—á–∞—è BSL/1C
- **–†–µ–∂–∏–º—ã**: search, replace, count
- **BSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: ‚úÖ –ë–∞–∑–æ–≤–∞—è (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```javascript
// –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä –≤ BSL —Ñ–∞–π–ª–∞—Ö
{
  "pattern": "–ü—Ä–æ—Ü–µ–¥—É—Ä–∞",
  "path": "src/**/*.bsl",
  "language": "bsl",
  "mode": "search"
}
```

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

1. `mcp_settings_ast_grep.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞
2. `.ast-grep/sgconfig.yml` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AST-grep –¥–ª—è BSL
3. `test-ast-grep-bsl.js` - –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
4. `test-mcp-direct.js` - –¢–µ—Å—Ç—ã MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

## üéØ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:
- ‚úÖ –ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ BSL —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–º–µ–Ω—ã
- ‚úÖ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude Code
- ‚úÖ Fallback –Ω–∞ grep-–ø–æ–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- ‚ö†Ô∏è –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ BSL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- ‚ö†Ô∏è –°–ª–æ–∂–Ω—ã–µ AST –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è 1–° –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude**: MCP —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é
2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ BSL –ø–æ–¥–¥–µ—Ä–∂–∫–∏**: –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤  
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AST-grep —Å MCP —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

- MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `ast_grep`
- –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ BSL —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- Claude Code –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AST-grep –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ 1–° –∫–æ–¥–µ
- –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 25.09.2025*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é*