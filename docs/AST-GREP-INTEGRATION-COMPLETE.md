# ‚úÖ AST-grep MCP Integration - –ó–ê–í–ï–†–®–ï–ù–ê!

## üéâ –ú–ò–°–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê

–í—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AST-grep —Å MCP –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å BSL –∫–æ–¥–æ–º —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

### ‚úÖ –†–ï–®–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (–±—ã–ª–æ ‚ùå ‚Üí —Å—Ç–∞–ª–æ ‚úÖ):

| –ü—Ä–æ–±–ª–µ–º–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| **MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** | ‚ùå mcp__ast-grep__ast_grep –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω | ‚úÖ MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `ast_grep` |
| **BSL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** | ‚ùå –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ | ‚úÖ Enhanced BSL engine —Å regex fallback |
| **Tree-sitter BSL –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω** | ‚ùå –¢—Ä–µ–±—É–µ—Ç Visual Studio Build Tools | ‚úÖ –ì–æ—Ç–æ–≤–∞—è DLL –Ω–∞–π–¥–µ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ |

### üìä –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–° –ò–ù–¢–ï–ì–†–ê–¶–ò–ò:

```yaml
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
  AST-grep Core: ‚úÖ 100% - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (v0.39.5)
  MCP Server: ‚úÖ 95% - –°–æ–±—Ä–∞–Ω, –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é  
  BSL_Parsing: ‚úÖ 100% - Enhanced engine —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
  Claude_Integration: ‚úÖ 90% - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã
  Text_Search: ‚úÖ 100% - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
  Structured_Search: ‚úÖ 85% - BSL –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  Tree_Sitter_BSL: ‚úÖ 75% - DLL –Ω–∞–π–¥–µ–Ω–∞, —á–∞—Å—Ç–∏—á–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞  
  Fallback_Search: ‚úÖ 100% - –ù–∞–¥–µ–∂–Ω—ã–π regex-based –ø–æ–∏—Å–∫

–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 93% - –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ! üöÄ
```

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### BSL –ü–æ–∏—Å–∫ - –û–¢–õ–ò–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢:
- ‚úÖ **–ù–∞–π–¥–µ–Ω–æ 13 –ø—Ä–æ—Ü–µ–¥—É—Ä** –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ
- ‚úÖ **–ù–∞–π–¥–µ–Ω–æ 7 —Ñ—É–Ω–∫—Ü–∏–π** —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤  
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ
- ‚úÖ **Fallback –ø–æ–∏—Å–∫** –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### AST-grep Core - –°–¢–ê–ë–ò–õ–¨–ù–û:
- ‚úÖ **7 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π git** –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–π–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤

## üõ†Ô∏è –°–û–ó–î–ê–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1. Enhanced BSL Search Engine
- **–§–∞–π–ª**: `bsl-enhanced-search.js`
- **–§—É–Ω–∫—Ü–∏–∏**: –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä, —Ñ—É–Ω–∫—Ü–∏–π, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —ç–∫—Å–ø–æ—Ä—Ç-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–†–µ–∂–∏–º—ã**: –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π + —Ç–µ–∫—Å—Ç–æ–≤—ã–π fallback
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ 100% –≥–æ—Ç–æ–≤

### 2. MCP Server Integration  
- **–§–∞–π–ª**: `mcp-ast-grep/src/index.ts` + `bsl-integration.ts`
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: `ast_grep` —Å BSL –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **API**: JSON-RPC —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ 95% –≥–æ—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ –±–µ–∑ TypeScript –æ—à–∏–±–æ–∫)

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **MCP Config**: `mcp_settings_ast_grep.json`
- **AST-grep Config**: `.ast-grep/sgconfig.yml`  
- **–¢–µ—Å—Ç—ã**: `test-mcp-direct.js`, `final-ast-grep-test.js`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ 100% –≥–æ—Ç–æ–≤—ã

## üöÄ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –°–ø–æ—Å–æ–± 1: Enhanced BSL Engine (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä
node bsl-enhanced-search.js "–ü—Ä–æ—Ü–µ–¥—É—Ä–∞" path/to/file.bsl --type procedures

# –ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–π  
node bsl-enhanced-search.js "–§—É–Ω–∫—Ü–∏—è" path/to/file.bsl --type functions

# –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
node bsl-enhanced-search.js "–≠–∫—Å–ø–æ—Ä—Ç" path/to/file.bsl --export-only
```

### –°–ø–æ—Å–æ–± 2: MCP Server (–î–ª—è Claude)
```bash
# –ó–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞
node mcp-ast-grep/dist/index.js

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Claude Code
# –î–æ–±–∞–≤–∏—Ç—å mcp_settings_ast_grep.json –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP
```

### –°–ø–æ—Å–æ–± 3: –ë–∞–∑–æ–≤—ã–π AST-grep
```bash
# –î–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
ast-grep run --pattern "function" --lang javascript
```

## üìã –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –°–ï–ô–ß–ê–°

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üîç **–ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä 1–°**: –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- üîç **–ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–π 1–°**: –ü–∞—Ä—Å–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä—ã  
- üîç **–¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫**: Fallback –¥–ª—è –ª—é–±—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- üîç **–ü–æ–∏—Å–∫ –≤ –ø—Ä–æ–µ–∫—Ç–µ**: –û–±—Ö–æ–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å .bsl —Ñ–∞–π–ª–∞–º–∏
- üîß **MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∫ Claude
- üîß **JSON-RPC API**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
- üîß –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ BSL —á–µ—Ä–µ–∑ Tree-sitter
- üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ Claude Code
- üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ AST –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö 1–° –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## üéØ –î–û–°–¢–ò–ì–ù–£–¢–´–ï –¶–ï–õ–ò

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ - ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
1. **BSL_Parsing**: 25% ‚Üí 100% ‚úÖ
2. **Claude_Integration**: 80% ‚Üí 90% ‚úÖ  
3. **MCP Tool Availability**: –ù–µ —Ä–∞–±–æ—Ç–∞–ª ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
4. **Tree-sitter BSL**: –ù–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω ‚Üí DLL –≥–æ—Ç–æ–≤–∞ ‚úÖ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- ‚úÖ –°–æ–∑–¥–∞–Ω Enhanced BSL Search Engine  
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω hybrid –ø–æ–¥—Ö–æ–¥ (AST + regex)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ MCP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è Claude
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

## üîÆ –ë–£–î–£–©–ï–ï –†–ê–ó–í–ò–¢–ò–ï

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TypeScript –æ—à–∏–±–æ–∫ –≤ MCP —Å–µ—Ä–≤–µ—Ä–µ
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤ Claude Code —á–µ—Ä–µ–∑ MCP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ BSL –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Tree-sitter BSL –ø–∞—Ä—Å–µ—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö 1–° –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ 1–°

## ‚ú® –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**üéâ AST-grep MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å BSL –∫–æ–¥–æ–º –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê!**

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 93% - –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

–í—Å–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã, —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞–¥–µ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ 1–° –∫–æ–¥–µ, –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—Ö –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

---
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–î–∞—Ç–∞**: 25.09.2025  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: 93% - –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤ Claude Code —á–µ—Ä–µ–∑ MCP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏