Глава 2. Инструкция по внедрению библиотеки
Первое внедрение подсистем библиотеки в конфигурацию и обновление версии уже внедренной библиотеки заметно отличаются. В целом процесс внедрения состоит из следующих этапов:
1. Перенос объектов метаданных из файла поставки библиотеки в конфигурацию. 2. Настройка перенесенных объектов библиотеки. 3. Использование объектов библиотеки при разработке конфигурации.
Все функциональные подсистемы, входящие в состав библиотеки, относятся к родительской подсистеме Стандартные подсистемы в дереве объектов метаданных конфигуратора. Подсистемы, предназначенные для конфигураций, рассчитанных на работу в модели сервиса, подчинены подсистеме Работа в модели сервиса.
Для задачи первоначального внедрения библиотеки в прикладных решениях в дистрибутив входит внешняя обработка ПервоеВнедрениеБСП.epf . Она позволяет выбрать подсистемы для внедрения с учетом зависимостей, а также удалить код неиспользуемых подсистем. Для проверки корректности встраивания при первом внедрении библиотеки, а также для проверок при последующих обновлениях версии библиотеки в составе дистрибутива поставляется внешний отчет ПроверкаВнедренияБСП.erf [1]. Он позволяет выявлять различные проблемы внедрения библиотеки (проверка корректности заполнения состава типов, проверка наличия вставок кода и т. п.).
Для быстрого начала разработки новой конфигурации на основе библиотеки можно также воспользоваться краткой инструкцией, содержащей только минимально необходимый список действий для запуска конфигурации.
[1] Для работы отчета в клиент-серверном режиме работы необходимо убедиться, что он доступен пользователю, под которым запущен сервер 1С:Предприятия.
Перенос объектов метаданных из файла поставки библиотеки в конфигурацию
Первое внедрение
Для выполнения переноса объектов библиотеки в конфигурацию при первом внедрении нужно выбрать в режиме Конфигуратор команду меню Конфигурация – Сравнить, объединить с конфигурацией из файла... В диалоговом окне указать файл поставки библиотеки и подтвердить запрос о постановке к ней на поддержку.
Шаг 1. В открывшемся окне сравнения и объединения конфигураций снять все флажки и отметить переносимые объекты с помощью команды Действия – Отметить по подсистемам файла. Из группы подсистем СтандартныеПодсистемы выбрать:[1]
обязательные подсистемы согласно таблице 2.1; дополнительные подсистемы, обязательные к переносу в конфигурацию для работы в модели сервиса, согласно таблице 2.2; подсистемы, которые требуется внедрить в вашу конфигурацию; подсистемы, от которых зависят переносимые вами подсистемы, согласно таблицам 2.1–2.3. [2]
Далее нажать кнопку Установить.
Важно!
Необходимо убедиться, что в список подсистем для переноса включены все обязательные подсистемы из таблицы 2.1. Если предполагается работа конфигурации в модели сервиса, то обязательными также являются подсистемы из таблицы 2.2. В противном случае конфигурация окажется неработоспособной.
[1] При этом не нужно выбирать подсистемы, не входящие в группу подсистем СтандартныеПодсистемы . В частности, подсистему Администрирование .
[2] Для получения файла настроек сравнения/объединения для загрузки в конфигуратор с учетом зависимостей рекомендуется воспользоваться обработкой ПервоеВнедрениеБСП.epf , входящей в состав дистрибутива.
Шаг 2. Дополнительно нужно установить или снять флажки для отдельных объектов библиотеки и их свойств согласно инструкциям в таблице 2.5.
Далее выбрать режим объединения Взять из файла (Действия – Установить режим для всех…) и нажать кнопку Выполнить. В окне со списком зависимых объектов нажать кнопку Продолжить.
Рекомендуется предварительно сохранить в файл выполненные настройки сравнения/объединения на случай, если этот шаг придется повторить заново из-за возникших затруднений.
Шаг 3. После завершения сравнения и объединения перейти ко второму этапу – Настройка объектов библиотеки. В зависимости от числа внедряемых подсистем этот шаг может занять от одного до нескольких часов.
Фильтр подсистем
ПроверкаВнедренияБСП.erf , входящего в состав дистрибутива.
Обновление версии библиотеки
В этом разделе описана общая схема обновления на новую версию библиотеки. Отдельные особенности обновления каждой конкретной версии библиотеки приведены в сопроводительном документе updateSSL.htm, входящем в поставку библиотеки. Как правило, при переходе между редакциями, подредакциями и релизами библиотеки (первая, вторая и третья цифры в номере версии) требуется выполнить дополнительные действия по обновлению, а при переходе между исправительными релизами библиотеки (четвертая цифра в номере версии) никаких дополнительных действий не требуется. В редких случаях, когда дополнительные действия все же необходимы при обновлении на исправительный релиз библиотеки, соответствующие инструкции содержатся не только в updateSSL.htm, но и в файле readme.txt в разделе Важно.
Для обновления версии библиотеки нужно выбрать команду меню Конфигурация – Поддержка – Обновить конфигурацию. В диалоговом окне указать вариант Выбор файла обновления, задать путь к файлу поставки библиотеки и подтвердить запрос об обновлении версии конфигурации поставщика.
Шаг 1. В новой версии поставки библиотеки могут быть удалены объекты, на которые ссылаются объекты обновляемой конфигурации. Такие ссылки должны быть очищены вручную перед обновлением, чтобы объекты библиотеки были удалены автоматически. Для выявления таких объектов в открывшемся окне сравнения и объединения конфигураций нужно снять все флажки напротив объектов метаданных, затем установить фильтр сравнения и объединения в значение Показывать присутствующие только в старой конфигурации поставщика в группе Новая конфигурация поставщика – Старая конфигурация поставщика, как указано на рисунке.
Далее отметить все объекты метаданных флажками, выбрать режим объединения Взять из новой конфигурации поставщика (Действия – Установить режим для всех…) и нажать кнопку Действия – Поиск неразрешимых ссылок на удаляемые объекты.
После выполнения операции в сообщении будут выведены все объекты конфигурации, которые имеют ссылки на удаляемые объекты библиотеки. Если в списке есть объекты прикладного решения, то необходимо удалить из них ссылки на удаляемые объекты библиотеки и приступить к шагу 2.
Шаг 2. Повторно выполнить команду Конфигурация – Поддержка – Обновить конфигурацию, указав в варианте Выбор файла обновления путь к файлу поставки библиотеки.
В открывшемся окне сравнения и объединения конфигураций снять все флажки и отметить переносимые объекты с помощью команды Действия – Отметить по подсистемам новой конфигурации поставщика. Из группы подсистем СтандартныеПодсистемы выбрать:[3]
обязательные подсистемы согласно таблице 2.1; дополнительные подсистемы, обязательные к переносу в конфигурацию для работы в модели сервиса, согласно таблице 2.2; все ранее внедренные подсистемы, а также подсистемы, которые дополнительно требуется внедрить в вашу конфигурацию; подсистемы, от которых зависят отмеченные выше подсистемы, согласно таблицам 2.1–2.3.
Далее нажать кнопку Установить.
Важно!
Необходимо убедиться, что в список отмеченных подсистем включены все обязательные подсистемы из таблицы 2.1 (вместе с относящимися к ним объектами метаданных). Если предполагается работа конфигурации в модели сервиса, то обязательными также являются подсистемы из таблицы 2.2. В противном случае конфигурация окажется неработоспособной.
[3] При этом не нужно выбирать подсистемы, не входящие в группу подсистем СтандартныеПодсистемы . В частности, подсистему
объединения конфигураций (объект метаданных «подсистема»).
Выбрать режим объединения Взять из новой конфигурации поставщика (Действия – Установить режим для всех…).
Дополнительно нужно установить или снять флажки для отдельных объектов библиотеки и их свойств согласно инструкциям в таблице 2.6. В зависимости от числа обновляемых и дополнительно устанавливаемых подсистем этот шаг может занять от 15 минут до одного часа.
Затем необходимо отметить к удалению из конфигурации все устаревшие объекты метаданных библиотеки. Для этого установить фильтр сравнения и объединения в значение Показывать присутствующие только в старой конфигурации поставщика в группе Новая конфигурация поставщика – Старая конфигурация поставщика, как указано на рисунке.
Далее отметить все объекты метаданных флажками и нажать кнопку Выполнить. В окне со списком зависимых объектов нажать кнопку Продолжить.
Рекомендуется предварительно сохранить в файл выполненные настройки сравнения/объединения на случай, если этот шаг придется повторить заново из-за возникших затруднений.
При обновлении на исправительные релизы можно выполнять обновление более автоматизированным способом, что позволит существенно сэкономить время при регулярных (например, еженедельных) обновлениях. Исправительные релизы библиотеки отличаются только четвертой цифрой в полном номере версии, например: 2.3.4.1, 2.3.4.2, 2.3.4.3 и т. п.
Для этого в комплект поставки включена внешняя обработка ОбновлениеНаИсправительнуюВерсиюБСП.epf .
Необходимо запустить ее в информационной базе с конфигурацией, содержащей предыдущий релиз библиотеки, и нажать на кнопку Обновить на исправительную версию, указав cf-файл новой версии библиотеки из комплекта поставки. При этом выполняется автоматическое сравнение/объединение с новой конфигурацией библиотеки согласно настройкам, которые соответствуют документации: будут перенесены все поставляемые объекты библиотеки, а переопределяемые при внедрении – объединены с приоритетом конфигурации поставщика (например, определяемые типы) или пропущены (как например, переопределяемые модули). После сравнения/объединения конфигурация базы данных не будет обновлена автоматически, что позволяет выполнить сравнение с конфигурацией базы данных и внести правки в измененные объекты: переопределяемые модули, различные локальные исправления и доработки.
После обновления необходимо дополнительно выполнить инструкции из раздела Переход с тестовых версий или Переход с предыдущих версий файла UpdateSSL, если они есть.
Кроме того, в качестве альтернативного варианта по кнопке Сформировать файл настроек предусмотрена возможность сформировать файл настроек сравнения/объединения, который затем можно загрузить в конфигураторе для ручного сравнения/объединения.
При обновлении на новые функциональные релизы (изменение третьей цифры) расстановку флажков в окне сравнения/объединения необходимо выполнять, как и ранее, в конфигураторе, следуя инструкциям, приведенным выше.
Шаг 3. После завершения сравнения и объединения перейти ко второму этапу – Настройка объектов библиотеки. Прежде всего, обратите внимание на обновление переопределяемых модулей (см. подраздел Общие модули).
После завершения настройки объектов библиотеки рекомендуется проверить корректность внедрения при помощи внешнего отчета ПроверкаВнедренияБСП.erf , входящего в состав дистрибутива.
Зависимости между подсистемами библиотеки
Таблица 2.1. Подсистемы, обязательные к переносу в конфигурацию
1. Базовая функциональность Профили безопасности [1]
2. Обновление версии ИБ Обращения в техническую поддержку [3]
3. Пользователи Контактная информация [2]
[1] При внедрении подсистемы Базовая функциональность без подсистемы Профили безопасности см. дополнительные инструкции в разделе Особые случаи внедрения подсистемы в соответствующем разделе главы 3.
[2] При внедрении подсистемы Пользователи для использования в модели сервиса подсистема Контактная информация является обязательной. В противном случае подсистема может быть внедрена отдельно. См. инструкции по внедрению без подсистемы в разделе Особые случаи внедрения подсистемы в соответствующем разделе главы 3.
[3] Нежесткая зависимость, т. е. подсистема может быть внедрена отдельно. В соответствующем разделе главы 3 могут содержаться дополнительные инструкции по отдельному внедрению подсистемы.
Таблица 2.2. Дополнительные подсистемы, обязательные к переносу в конфигурацию для работы в модели сервиса
№ Подсистема Подчиненная подсистема в ветке От чего зависит
1. Работа в модели сервиса Базовая функциональность в модели сервиса
2. Работа в модели сервиса Обновление версии ИБ в модели сервиса Завершение работы пользователей
3. Работа в модели сервиса Пользователи в модели сервиса
Таблица 2.3. Необязательные подсистемы, допускающие выборочную установку
Фильтр подсистем
Фильтр подсистем
1. Адресный классификатор Контактная информация [1]Получение файлов из Интернета [1] Библиотека интернет-поддержки – Базовая функциональность [1]
2. Анкетирование Настройка порядка элементов Подключаемые команды
3. Банки Библиотека интернет-поддержки – Работа с классификаторами [1] [2] Контактная информация [1]
4. Бизнес-процессы и задачи Работа с почтовыми сообщениями [1] Управление доступом [1]
5. Валюты Получение файлов из Интернета Библиотека интернет-поддержки – Работа с классификаторами [1] [2] Конструктор формул [1]
6. Варианты отчетов
Конструктор формул Работа с почтовыми сообщениями [1] Подключаемые команды [1] Дополнительные отчеты и обработки [1] Рассылка отчетов [1] Обсуждения [1]
7. Версионирование объектов
8. Взаимодействия
Контактная информация Настройка порядка элементов Отправка SMS Подключаемые команды Полнотекстовый поиск Работа с файлами Работа с почтовыми сообщениями Свойства [1]
9. Внешние компоненты Библиотека интернет-поддержки – Получение внешних компонент [1] [2]
10. Выгрузка объектов в файлы
Работа с файлами [1] Работа с почтовыми сообщениями [1] Печать [4] Подключаемые команды [4] Конструктор формул [4]
11. Генерация штрихкода Внешние компоненты [1]
12. Графики работы Календарные графики
13. Групповое изменение объектов
14. Даты запрета изменения
15. Дополнительные отчеты и обработки
Печать [1] Подключаемые команды Варианты отчетов [1] Групповое изменение объектов [1] [2]
16. Завершение работы пользователей
17. Загрузка данных из файла Дополнительные отчеты и обработки [1] Групповое изменение объектов [1]
18. Заметки пользователя
19. Запрет редактирования реквизитов объектов Поиск и удаление дублей [1]
20. Защита персональных данных Печать Подключаемые команды Свойства [1]
21. Интерфейс OData
22. Информация при запуске
23. Календарные графики
24. Конструктор формул
25. Контактная информация
Адресный классификатор [1] Настройка порядка элементов Обращения в техническую поддержку [1] Подключаемые команды Библиотека интернет-поддержки – Работа с классификаторами [1]
26. Контроль ведения учета Варианты отчетов Подключаемые команды Текущие дела [1]
27. Контроль работы пользователей Варианты отчетов [1] Рассылка отчетов [1]
28. Машиночитаемые доверенности
Контактная информация Обращения в техническую поддержку [1] Печать Подключаемые команды Получение файлов из Интернета Работа с файлами Склонение представлений объектов Электронная подпись
29. Мультиязычность
30. Мультиязычность.ПереводТекста Получение файлов из интернета
31. Напоминания пользователя Подключаемые команды [1]
32. Настройка порядка элементов
33. Настройки программы Все подсистемы [1]
34. Обмен данными
Обновление конфигурации [1] Получение файлов из Интернета [1] Префиксация объектов [1] Работа с почтовыми сообщениями [1] Регламентные задания [1] [2] [3]
35. Обновление конфигурации Завершение работы пользователей Работа с почтовыми сообщениями [1] Проверка легальности получения обновлений [1]
36. Обращения в техническую поддержку
37. Обсуждения
38. Организации
39. Отправка SMS Получение файлов из Интернета
40. Отчет о движении документов Варианты отчетов Подключаемые команды
41. Оценка производительности
42. Печать
[4] Конструктор формул Подключаемые команды Работа с почтовыми сообщениями [1] Работа с файлами [1] Дополнительные отчеты и обработки [1]
43. Подключаемые команды Печать [1] Варианты отчетов [1] Дополнительные отчеты и обработки [1]
44. Поиск и удаление дублей
45. Полнотекстовый поиск
46. Получение файлов из Интернета
47. Префиксация объектов
48. Проверка легальности получения обновлений
49. Профили безопасности
50. Работа с почтовыми сообщениями Обращения в техническую поддержку [1]
51. Работа с файлами Обращения в техническую поддержку [1] Свойства [1] Управление доступом [1]
52. Рассылка отчетов
Варианты отчетов Взаимодействия [1] Дополнительные отчеты и обработки [1] Контактная информация Отправка SMS [1] Печать [1] Подключаемые команды [1] Получение файлов из Интернета [1] Работа с почтовыми сообщениями Работа с файлами [1] Управление доступом [1] Электронная подпись [1] Групповое изменение объектов [1]
53. Регламентные задания
54. Резервное копирование ИБ Завершение работы пользователей
55. Свойства Запрет редактирования реквизитов объектов
56. Склонение представлений объектов Получение файлов из Интернета [1]
57. Структура подчиненности
58. Текущие дела
59. Удаление помеченных объектов
60. Управление доступом [2]
61. Управление итогами и агрегатами
62. Центр мониторинга Оценка производительности [1]
63. Учет оригиналов первичных документов Настройка порядка элементов [1] Подключаемые команды [1] Печать [1]
64. Шаблоны сообщений
Взаимодействия [1] Отправка SMS [1] Печать [1] Работа с почтовыми сообщениями [1]
65. Электронная подпись
Адресный классификатор [1] Библиотека интернет-поддержки – Базовая функциональность [1] Контактная информация [1] Напоминания пользователя [1] Обращения в техническую поддержку [1] Печать [1] Получение файлов из Интернета [1]
66. Электронная подпись сервиса DSS
Электронная подпись Получение файлов из интернета Варианты отчетов [1] Подключаемые команды [1] Оценка производительности [1] Библиотека интернет-поддержки – Базовая функциональность [1]
[1] Нежесткая зависимость, т. е. подсистема может быть внедрена отдельно. В соответствующем разделе главы 3 могут содержаться дополнительные инструкции по отдельному внедрению подсистемы.
[2] При внедрении в конфигурацию, рассчитанную на работу в модели сервиса, следует также отметить соответствующую подсистему с постфиксом ВМоделиСервиса из родительской подсистемы Работа в модели сервиса. Например, если к внедрению отмечена подсистема Валюты, следует также отметить и подсистему Валюты в модели сервиса.
[3] Подсистема Обмен данными обязательна к внедрению при необходимости разработки обмена данными в распределенной информационной базе (РИБ).
[4] При внедрении в конфигурацию, рассчитанную на работу на нескольких языках, следует также отметить одноименную подсистему из родительской подсистемы Мультиязычность.
Таблица 2.4. Необязательные подсистемы, допускающие выборочную установку для конфигураций, рассчитанных на работу в модели сервиса
№ Подсистема Подчиненная подсистема в ветке От чего зависит
1. Работа в модели сервиса
Внешние компоненты в модели сервиса Внешние компоненты
2. Работа в модели сервиса
Дополнительные отчеты и обработки в модели сервиса
Дополнительные отчеты и обработки
3. Работа в модели сервиса
Работа с файлами в модели сервиса Работа с файлами
4. Работа в модели сервиса
Управление доступом в модели сервиса Управление доступом
Объекты и свойства объектов, для которых необходимо дополнительно изменить отметку перед объединением конфигурации с библиотекой
Таблица 2.5. Объекты и свойства объектов, для которых необходимо дополнительно изменить отметку перед объединением конфигурации с библиотекой при первом внедрении подсистемы в конфигурацию
Фильтр подсистем
Фильтр подсистем
1. Базовая функциональность
Пункт Свойства у корневого объекта конфигурации:
Основные роли; Модуль приложения; Модуль сеанса; Модуль внешнего соединения; Модуль обычного приложения; Режим использования модальности; Режим совместимости интерфейса; Режим совместимости.
Установить флажок.
Модуль приложения - это модули управляемого приложения и обычного приложения, если они видны в дереве метаданных в окне сравнения и объединения конфигураций.
2. Базовая функциональность
Пункт Свойства у корневого объекта конфигурации:
Режим использования синхронных вызовов расширений платформы и внешних компонент.
Установить флажок.
Допустимо не устанавливать при внедрении без подсистем Работа с файлами, Обновление конфигурации и Резервное копирование ИБ
3. Базовая функциональность
Остальные свойства корневого объекта конфигурации
Снять флажок.
4. Настройки программы
Подсистема Администрирование. Установить флажок.
Только флажок самой подсистемы, состав подсистемы отмечать к объединению не нужно.
5. Настройки программы
Общие команды:
ДополнительныеОбработкиАдминистрирование ; ДополнительныеОтчетыАдминистрирование .
Снять флажок.
Только при внедрении без подсистемы Дополнительные отчеты и обработки.
6. Настройки программы
Общая команда ПанельОтчетовАдминистрирование . Снять флажок.
Только при внедрении без подсистемы Варианты отчетов. Только при внедрении без подсистемы Префиксация объектов.
7. Подключаемые команды
Подсистема ПодключаемыеОтчетыИОбработки .
Установить флажок (только флажок самой подсистемы, состав подсистемы отмечать к объединению не нужно).
Таблица 2.6. Объекты и свойства объектов, для которых необходимо дополнительно изменить отметку перед объединением конфигурации с библиотекой при обновлении подсистемы в конфигурации
Свойства конфигурации
№ Подсистема Название объекта Инструкция
1. Базовая функциональность Пункт Свойства у корневого объекта конфигурации. Снять флажок.
Подсистемы
№ Подсистема Название объекта Инструкция
1. Настройки программы
Администрирование . Для свойств Командный интерфейс и Состав установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
2. Подключаемые команды
ПодключаемыеОтчетыИОбработки . Для свойств Командный интерфейс и Состав установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
Общие модули
Фильтр подсистем
Фильтр подсистем
Фильтр подсистем
1. Базовая функциональность
МультиязычностьПереопределяемый ; ОбщегоНазначенияКлиентПереопределяемый ; ОбщегоНазначенияПереопределяемый ; ПодсистемыКонфигурацииПереопределяемый .
2. Банки РаботаСБанкамиПереопределяемый
3. Бизнес-процессы и задачи БизнесПроцессыИЗадачиКлиентПереопределяемый ; БизнесПроцессыИЗадачиПереопределяемый .
4. Варианты отчетов
ВариантыОтчетовПереопределяемый ; ОтчетыКлиентПереопределяемый ; ОтчетыПереопределяемый .
5. Взаимодействия
ВзаимодействияКлиентПереопределяемый ; ВзаимодействияКлиентСерверПереопределяемый ; ВзаимодействияПереопределяемый .
6. Валюты РаботаСКурсамиВалютПереопределяемый .
7. Групповое изменение объектов ГрупповоеИзменениеОбъектовПереопределяемый .
8. Даты запрета изменения ДатыЗапретаИзмененияПереопределяемый .
9. Дополнительные отчеты и обработки ДополнительныеОтчетыИОбработкиПереопределяемый ; ДополнительныеОтчетыИОбработкиКлиентПереопределяемый .
10. Запрет редактирования реквизитов объектов ЗапретРедактированияРеквизитовОбъектовПереопределяемый .
11. Защита персональных данных ЗащитаПерсональныхДанныхПереопределяемый .
12. Информация при запуске ИнформацияПриЗапускеПереопределяемый .
13. Календарные графики КалендарныеГрафикиПереопределяемый .
14. Контроль ведения учета КонтрольВеденияУчетаПереопределяемый .
15. Машиночитаемые доверенности МашиночитаемыеДоверенностиФНСКлиентПереопределяемый ; МашиночитаемыеДоверенностиФНСПереопределяемый .
16. Мультиязычность МультиязычностьПереопределяемый .
17. Напоминания пользователя НапоминанияПользователяПереопределяемый .
18. Настройки программы НастройкиПрограммыПереопределяемый .
19. Обмен данными ОбменДаннымиПереопределяемый .
20. Обновление версии ИБ ОбновлениеИнформационнойБазыКлиентПереопределяемый . ОбновлениеИнформационнойБазыПереопределяемый .
21. Организации ОрганизацииПереопределяемый .
22. Отправка SMS ОтправкаSMSПереопределяемый .
23. Печать УправлениеПечатьюКлиентПереопределяемый . УправлениеПечатьюПереопределяемый .
24. Подключаемые команды
ЗаполнениеОбъектовПереопределяемый ; ПодключаемыеКомандыПереопределяемый ; СозданиеНаОснованииПереопределяемый .
25. Поиск и удаление дублей ПоискИУдалениеДублейПереопределяемый .
26. Полнотекстовый поиск ПолнотекстовыйПоискСерверПереопределяемый .
27. Пользователи ПользователиПереопределяемый .
28. Префиксация объектов ПрефиксацияОбъектовКлиентСерверПереопределяемый ; ПрефиксацияОбъектовПереопределяемый .
29. Работа в модели сервиса ОбменДаннымиВМоделиСервисаПереопределяемый .
30. Работа с почтовыми сообщениями РаботаСПочтовымиСообщениямиПереопределяемый ; РаботаСПочтовымиСообщениямиКлиентПереопределяемый .
31. Работа с файлами РаботаСФайламиКлиентПереопределяемый ; РаботаСФайламиПереопределяемый .
32. Рассылка отчетов РассылкаОтчетовКлиентПереопределяемый ; РассылкаОтчетовПереопределяемый .
33. Регламентные задания РегламентныеЗаданияПереопределяемый .
34. Резервное копирование ИБ РезервноеКопированиеИБКлиентПереопределяемый .
35. Свойства УправлениеСвойствамиПереопределяемый .
36. Структура подчиненности СтруктураПодчиненностиПереопределяемый .
37. Текущие дела ТекущиеДелаПереопределяемый .
38. Управление доступом УправлениеДоступомПереопределяемый .
39. Учет оригиналов первичных документов УчетОригиналовПервичныхДокументовКлиентПереопределяемый ; УчетОригиналовПервичныхДокументовПереопределяемый .
40. Центр мониторинга ЦентрМониторингаПереопределяемый .
41. Шаблоны сообщений ШаблоныСообщенийПереопределяемый .
42. Электронная подпись
ЗаявлениеНаСертификатПереопределяемый ; ЭлектроннаяПодписьКлиентПереопределяемый ; ЭлектроннаяПодписьПереопределяемый .
43. Электронная подпись сервиса DSS СервисКриптографииDSSПереопределяемый .
Роли
№ Подсистема Название объекта Инструкция
1. Варианты отчетов
ПолныеПрава ; АдминистраторСистемы .
Для свойства Права установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
Общие реквизиты
№ Подсистема Название объекта Инструкция
1. Работа в модели сервиса ОбластьДанныхОсновныеДанные ; ОбластьДанныхВспомогательныеДанные . Снять флажок.
Планы обмена
Фильтр подсистем
Фильтр подсистем
№ Подсистема Название объекта Инструкция
1. Обновление версии ИБ
ОбновлениеИнформационнойБазы , свойство Состав .
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
Критерии отбора
№ Подсистема Название объекта Инструкция
1. Структура подчиненности СвязанныеДокументы , свойство Тип и свойство Состав . Снять флажок.
Функциональные опции
№ Подсистема Название объекта Инструкция
1. Базовая функциональность
РаботаВАвтономномРежиме ; РаботаВЛокальномРежиме ; РаботаВМоделиСервиса .
Снять флажок.
Определяемые типы
Фильтр подсистем
Фильтр подсистем
Фильтр подсистем
1. Базовая функциональность
Организация . Снять флажок
2. Анкетирование Респондент ; Интервьюер .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
3. Базовая функциональность
МестоХраненияФункциональныхОпций . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
4. Бизнес-процессы и задачи
БизнесПроцесс ; БизнесПроцессОбъект ; ОбъектАдресации ; ПредметЗадачи .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
5. Взаимодействия КонтактВзаимодействия ; ПредметВзаимодействия .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
6. Версионирование объектов
ВерсионируемыеДанные ; ВерсионируемыеДанныеОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
7. Даты запрета изменения
АдресатЗапретаИзменения . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
8. Дополнительные отчеты и обработки
ОбъектСДополнительнымиКомандами . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
9. Заметки пользователя
ПредметЗаметок ; ПредметЗаметокОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
10. Защита персональных данных
СубъектПерсональныхДанных . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
11. Контактная информация
ВладелецКонтактнойИнформации . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
12. Контроль ведения учета
КонтекстПроверокВеденияУчета ; УточнениеКонтекстаПроверокВеденияУчета .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
13. Машиночитаемые доверенности
Контрагент ; СторонаМЧД .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
14. Настройка порядка элементов
ОбъектСНастраиваемымПорядком . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
15. Напоминания пользователя
ПредметНапоминания ; ПредметНапоминанияОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
16. Работа в модели сервиса
КонечнаяТочкаОбменаСообщениями . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
17. Печать ОбъектСОсновнымиПечатнымиФормами ; ПолучательПечатныхФорм . Снять флажок.
18. Пользователи Подразделение ; ФизическоеЛицо . Снять флажок.
19. Пользователи
Пользователь ; ВнешнийПользователь ; ВнешнийПользовательОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
20. Работа с файлами
ВладелецФайлов . ПрисоединенныйФайл . ПрисоединенныйФайлОбъект . ВладелецПрисоединенныхФайлов . ВладелецПрисоединенныхФайловОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
21. Рассылка отчетов ПолучательРассылки . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
22. Свойства ВладелецДополнительныхСведений . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
23. Склонение представлений объектов
ОбъектСклонения . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
24. Управление доступом
ВладелецНастроекПрав ; ВладелецНастроекПравОбъект ; ВладелецЗначенийКлючейДоступа ; ВладелецЗначенийКлючейДоступаОбъект ; ЗначениеДоступа ; ЗначениеДоступаОбъект ; ПолеРегистраКлючейДоступаКРегистрам ; ВладелецНаборовЗначенийДоступаОбъект ; ВладелецСОграничениемПоНаборамЗначенийДоступаОбъект ; ВладелецВнешнихЗначенийВНаборахЗначенийДоступаОбъект .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
25. Управление доступом
ВладелецЗначенийКлючейДоступаДокумент ; ВладелецЗначенийКлючейДоступаНаборЗаписей ; ВладелецЗначенийКлючейДоступаНаборЗаписейРегистраРасчета .
Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
Если после сравнения/объединения в определяемом типе не окажется типов, тогда следует указать тип СправочникОбъект.ИдентификаторыОбъектовМетад
Если после сравнения/объединения в определяемом типе будут типы кроме СправочникОбъект.ИдентификаторыОбъектовМетад
тогда следует исключить тип СправочникОбъект.ИдентификаторыОбъектовМетад
из определяемого типа.
26. Учет оригиналов первичных документов
ОбъектСУчетомОригиналовПервичныхДокументов . Установить Режим объединения в Объединить приоритетом новой конфигурации поставщика
27. Учет оригиналов первичных документов
Сотрудник . Снять флажок.
28. Шаблоны сообщений
ПредметШаблонаСообщения ; ВладелецШаблонаСообщения .
Установить Режим объединения в Объедин приоритетом новой конфигурации постав
29. Электронная подпись
ПодписанныйОбъект ;
ПодписанныйОбъект .
Установить Режим объединения в Объедин приоритетом новой конфигурации постав
Общие команды
Фильтр подсистем
1. Обмен данными
Свойство Тип параметра команды:
Синхронизировать ; СинхронизироватьСДополнительнымиПараметрами ; НастройкиПодключения ; ЗагрузитьКомплектПравил ; ЗагрузитьПравилаКонвертацииОбъектов ; ЗагрузитьПравилаРегистрацииОбъектов ; ПолучитьНастройкиСинхронизацииДляДругойПрограммы ; СценарииСинхронизации ; СобытияОтправки ; СобытияПолучения ; СоставОтправляемыхДанных
УдалитьНастройкуСинхронизации ; СозданиеНачальногоОбразаСФайлами .
Снять флажок.
2. Структура подчиненности СвязанныеДокументы , свойство Тип параметра команды. Снять флажок.
1. 3. Управление доступом НастроитьПрава , свойство Тип параметра команды. Снять флажок.
Языки
№ Подсистема Название объекта Инструкция
1. Базовая функциональность Русский Установить флажок.
Справочники
Фильтр подсистем
Фильтр подсистем
1. Базовая функциональность
ИдентификаторыОбъектовМетаданных , свойство Предопределенные ИдентификаторыОбъектовРасширений , свойство
Предопределенные.
Снять флажок. После обновления любой библиотеки обновить предопределенные элементы с помощью отчета ПроверкаВнедренияБСП.epf в режиме исправления ошибки Управление доступом. Некорректный состав предопределенных элементов в справочнике ИдентификаторыОбъектовМетаданных .
Для сведения: внутренние идентификаторы предопределенных элементов можно изменять без последствий (нет потери данных). Например, можно удалить элемент и создать новый с тем же именем безопасно - произойдет корректная привязка к элементу данных. Если имя предопределенного (полное имя объекта метаданных без точки) не соответствует существующему объекту метаданных, тогда такой предопределенный элемент не привязывается к элементу данных и не создает каких-либо проблем.
2. Бизнес-процессы и задачи
РолиИсполнителей , свойство Предопределенные.
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
3. Контактная информация
ВидыКонтактнойИнформации , свойство Предопределенные.
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
4. Пользователи
ВнешниеПользователи , команда ВнешнийДоступ , свойство Тип параметра
команды. Снять флажок.
5. Свойства НаборыДополнительныхРеквизитовИСведений ,
свойство Предопределенные. Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
6. Управление доступом
ПрофилиГруппДоступа , свойство Предопределенные.
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
7. Учет оригиналов первичных документов
СостоянияОригиналовПервичныхДокументов , свойство Предопределенные.
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
Перечисления
№ Подсистема Название объекта Инструкция
1. Отправка SMS ПровайдерыSMS . Снять флажок.
Обработки
№ Подсистема Название объекта Инструкция
1. Настройки программы ПанельАдминистрированияБСП . Если внесены изменения в формы, то снять флажок.
Планы видов характеристик
Фильтр подсистем
Фильтр подсистем
Фильтр подсистем
1. Анкетирование ВопросыДляАнкетирования , свойство Тип . Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
2. Бизнес-процессы и задачи
ОбъектыАдресацииЗадач , свойства Предопределенные и Тип .
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
3. Даты запрета изменения
РазделыДатЗапретаИзменения , свойство Тип . Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
4. Даты запрета изменения
РазделыДатЗапретаИзменения , свойство Предопределенные . Снять флажок.
5. Свойства ДополнительныеРеквизитыИСведения , свойства Предопределенные и Тип .
Установить Режим объединения в Объединить с приоритетом новой конфигурации поставщика.
Бизнес-процессы
№ Подсистема Название объекта Инструкция
1. Бизнес-процессы и задачи Задание , свойство Вводится на основании. Снять флажок.
Настройка объектов библиотеки
После завершения сравнения и объединения объекты метаданных библиотеки перенесены в конфигурацию, но еще не настроены. Для настройки перенесенных объектов библиотеки нужно выполнить инструкции согласно таблице 2.7.
В том случае, если действия при первом внедрении библиотеки и при обновлении ее версии различаются, инструкции в таблице 2.7 явно делятся на части: При первом внедрении и При обновлении версии библиотеки. Особого внимания требуют модули корневого объекта конфигурации и переопределяемые общие модули, так как автоматическое обновление таких узких мест конфигурации невозможно. После таблицы 2.7 также приведены общие инструкции по первоначальной настройке и обновлению объектов библиотеки в конфигурации.
Таблица 2.7. Объекты библиотеки, которые требуют дополнительных действий после сравнения и объединения конфигурации с библиотекой
Общие объекты
Фильтр подсистем
1. Модуль сеанса При первом внедрении: Перенести целиком обработчик УстановкаПараметровСеанса .
2. Модуль приложения (модули управляемого приложения и обычного приложения)
При первом внедрении в обработчики
ПередНачаломРаботыСистемы
ПриНачалеРаботыСистемы
ПередЗавершениемРаботыСистемы
ОбработкаПолученияФормыВыбораПользователейСистемыВзаимодействия
ПриГлобальномПоиске
ПриВыбореРезультатаГлобальногоПоиска
ПриВыбореДействияРезультатаГлобальногоПоиска
ОбработкаПереходаПоНавигационнойСсылке
перенести блоки кода, отмеченные комментарием: // СтандартныеПодсистемы … // Конец СтандартныеПодсистемы
Также перенести фрагменты кода из области определения глобальных переменных.
При обновлении версии библиотеки перенести из файла поставки библиотеки блоки кода по внедряемым подсистемам в обработчиках
ПередНачаломРаботыСистемы
ПриНачалеРаботыСистемы
ПередЗавершениемРаботыСистемы
ОбработкаПолученияФормыВыбораПользователейСистемыВзаимодействия
ПриГлобальномПоиске
ПриВыбореРезультатаГлобальногоПоиска
ПриВыбореДействияРезультатаГлобальногоПоиска
ОбработкаПереходаПоНавигационнойСсылке
и области определения глобальных переменных: // <ПутьПодсистемы> … // Конец <ПутьПодсистемы>
3. Свойство Версия.
При первом внедрении установить в соответствии с шаблоном Р.П.З.С, где: Р – номер редакции (минимум 1 цифра); П – номер подредакции (минимум 1 цифра); З – номер версии (минимум 1 цифра); С – номер сборки (минимум 1 цифра). Например, 1.0.1.1. Подробнее см. статью на ИТС Нумерация редакций и версий. При каждом обновлении увеличивать версии.
Общие объекты для конфигураций, рассчитанных на работу в модели сервиса
Фильтр подсистем
1. Работа в модели сервиса
Общий реквизит ОбластьДанныхОсновныеДанные .
При первом внедрении:
Исключить из состава общего реквизита все объекты конечной конфигурации, по которым предполагается общее наполнение для всех областей.
При каждом обновлении:
Открыть состав общего реквизита и для всех объектов библиотеки установить свойство Использование в значение, указанное в файле поставки библиотеки.
2. Работа в модели сервиса
Общий реквизит ОбластьДанныхВспомогательныеДанные .
При первом внедрении:
Исключить из состава общего реквизита все объекты конечной конфигурации, к которым требуется доступ из сеансов с неустановленным использованием разделения.
При каждом обновлении:
Открыть состав общего реквизита и для всех объектов библиотеки установить свойство Использование в значение, указанное в файле поставки библиотеки.
3. Работа в модели сервиса
Общая команда ДобавитьПользователейСервиса Разместить в командном интерфейсе конфигурации
4. Работа в модели сервиса
Определяемый тип КонечнаяТочкаОбменаСообщениями .
Указать в свойстве Тип план обмена ОбменСообщениями , остальные типы данных исключить из состава.
5. Работа в модели сервиса
Регламентное задание СинхронизацияДанныхСПриложениемВИнтернете .
При первом внедрении определить расписание регламентных заданий. При каждом обновлении не переносить расписание из поставки.
Общие модули
Для настройки в конфигурации переопределяемых общих модулей рекомендуется придерживаться общего подхода:
1. При первой настройке переопределяемого общего модуля следует ознакомиться с документацией к его экспортным процедурам, приведенной в комментариях к ним. И при необходимости вписать реализацию в экспортные процедуры модуля.
2. При каждом последующем обновлении переопределяемого общего модуля требуется перенести из поставки библиотеки новые экспортные процедуры, удалить отсутствующие и убедиться, что комментарии, количество и имена параметров у всех процедур совпадают с поставкой библиотеки. При необходимости вписать реализацию в новые экспортные процедуры модуля, а также актуализировать реализацию уже существующих процедур, если в новой версии библиотеки было изменено их назначение или состав параметров.
Кроме того, в разделах документации по конкретным подсистемам могут содержаться дополнительные инструкции по переопределяемым модулям.
Роли
Фильтр подсистем
1. Базовая функциональность
БазовыеПраваБСП ; БазовыеПраваВнешнихПользователейБСП .
При внедрении совместно с подсистемой Свойства, но без подсистемы Управление доступом выполнить инструкции раздела Внедрение подсистем «Свойства» и «Управление доступом».
2. Базовая функциональность
ПолныеПрава .
Со всех объектов метаданных снять права:
Право интерактивного удаления, Интерактивное удаление предопределенных данных, Интерактивная пометка удаления предопределенных данных, Интерактивное снятие пометки удаления предопределенных данных, Интерактивное удаление помеченных предопределенных данных.
При внедрении совместно с подсистемой Работа в модели сервиса включить в роли права ко всем объектам, входящим в состав общего реквизита-разделителя ОбластьДанныхОсновныеДанные .
При внедрении без подсистемы Работа в модели сервиса включить в роль все права, кроме перечисленных выше, на все объекты метаданных конфигурации.
3. Свойства ИзменениеДополнительныхСведений ; ЧтениеДополнительныхСведений .
При внедрении в конфигурацию без подсистемы Управление доступом выполнить инструкции раздела Внедрение подсистем «Свойства» и «Управление доступом».
4. Защита персональных данных
<Роли не созданы> .
Реализовать роли, предоставляющие доступ к объектам:
документ СогласиеНаОбработкуПерсональныхДанных , документ ОтзывСогласияНаОбработкуПерсональныхДанных
регистр сведений СогласияНаОбработкуПерсональныхДанных .
См. пример роли _ДемоДобавлениеИзменениеСогласийНаОбработкуПерсональныхДанных
и _ДемоЧтениеСогласийНаОбработкуПерсональныхДанных . Для ролей, предоставляющих доступ к субъектам персональных данных, добавить доступ к объектам:
регистр сведений СубъектыДляСкрытияПерсональныхДанных .
Критерии отбора
№ Подсистема Название объекта Инструкция
1. Структура подчиненности
СвязанныеДокументы .
При первом внедрении, определив свойство Состав, установить возможные типы родительских документов, справочников и ПВХ в свойстве Тип и определить состав реквизитов дочерних документов, справочников и ПВХ, в которых будет происходить поиск родительских объектов.
Регламентные задания
№ Подсистема Название объекта Инструкция
1. Управление итогами и агрегатами
ОбновлениеАгрегатов
ПерестроениеАгрегатов
УстановкаПериодаРассчитанныхИтогов .
Свойство Расписание
При первом внедрении определить расписание регламентных заданий. При каждом обновлении не переносить расписание из поставки.
:::
Определяемые типы
Фильтр подсистем
Фильтр подсистем
Фильтр подсистем
1. Анкетирование Респондент .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть сопоставлены респондентам анкет. Например, справочники Респонденты, Сотрудники, Партнеры. Указать допустимые типы респондентов в составе типов свойства Тип .
2. Анкетирование Интервьюер .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть сопоставлены интервьюерам анкет. Например, справочники Пользователи, Внешние пользователи, Сотрудники. Указать допустимые типы интервьюеров в составе типов свойства Тип .
3. Базовая функциональность
Организация .
Если в конфигурации имеется справочник Организации , при первом внедрении указать в свойстве Тип
ссылку на него.
4. Бизнес-процессы и задачи
БизнесПроцесс . При первом внедрении указать в свойстве Тип ссылки на бизнес-процессы в конфигурации.
5. Бизнес-процессы и задачи
БизнесПроцессОбъект . При первом внедрении указать в свойстве Тип объекты бизнес-процессов в конфигурации.
6. Бизнес-процессы и задачи
ПредметЗадачи .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть основанием для бизнес-процесса Задание или других бизнес-процессов (определить список предметов задач). Указать в свойстве Тип ссылки на предметы задач.
7. Бизнес-процессы и задачи
ОбъектАдресации .
При первом внедрении:
На основании полученных ролей исполнителей составить список объектов, которые должны иметь ролевую адресацию (т. е. определить объекты адресации – см. раздел Бизнес-процессы и задачи). Указать в свойстве Тип ссылки на объекты адресации.
8. Бизнес-процессы и задачи
ОтложенныйБизнесПроцесс . При первом внедрении:
Принять решение по поводу состава бизнес-процессов, которые могут быть запущены отложенно.
Указать в свойстве Тип ссылки на данные бизнес-процессы.
9. Версионирование объектов
ВерсионируемыеДанные ; ВерсионируемыеДанныеОбъект .
При первом внедрении провести настройку состава типа согласно инструкции в разделе Версионирование объектов
10. Взаимодействия КонтактВзаимодействия .
При первом и последующих внедрениях:
Принять решение по поводу состава объектов конфигурации, которые должны указываться в качестве контактов взаимодействий. Добавить допустимые типы контактов в состав типов свойства Тип .
11. Взаимодействия ПредметВзаимодействия .
При первом и последующих внедрениях:
Принять решение по поводу состава объектов конфигурации, которые должны указываться в качестве предметов взаимодействий. Добавить допустимые типы предметов в состав типов свойства Тип .
12. Даты запрета изменения
АдресатЗапретаИзменения .
При первом внедрении:
Принять решение по поводу состава планов обмена, для которых администратор будет настраивать даты запрета загрузки, и добавить их типы в состав типов реквизита.
См. также дополнительные инструкции по настройке в разделе Даты запрета изменения.
13. Дополнительные отчеты и обработки
ОбъектСДополнительнымиКомандами .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, с которыми необходимо использовать дополнительные отчеты и обработки различных видов. Перечислить типы этих объектов в свойстве Тип .
Подробную инструкцию по настройке см. в разделе Дополнительные отчеты и обработки.
14. Заметки пользователя
ПредметЗаметок . ПредметЗаметокОбъект .
Определить состав объектов конфигурации, по поводу которых пользователи должны иметь возможность вводить заметки. Отметить выбранные типы объектов в свойстве Тип .
Подробную инструкцию по настройке см. в разделе Заметки пользователя.
15. Защита персональных данных
СубъектПерсональныхДанных .
При первом внедрении заполнить состав типов определяемого типа СубъектПерсональныхДанных . В
качестве типа выбрать сущность, являющуюся субъектом персональных данных в конфигурации
16. Контактная информация
ВладелецКонтактнойИнформации .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны содержать контактную информацию. Перечислить типы этих объектов в свойстве Тип .
Инструкцию по настройке см. в разделе Контактная информация.
17. Машиночитаемые доверенности
Контрагент ; СторонаМЧД .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые могут являться стороной доверенности и указать их в свойстве Тип
определяемого типа СторонаМЧД
, они должны соответствовать типам, указанным в определяемых типах Организация , Контрагент , Физическое лицо .
Инструкцию по настройке см. в разделе Машиночитаемые доверенности.
18. Напоминания пользователя
ПредметНапоминания ; ПредметНапоминанияОбъект .
Определить состав объектов ссылочного типа, для которых требуется ввод пользовательских напоминаний. Отметить выбранные типы объектов в свойстве Тип .
Подробную инструкцию по настройке см. в разделе Напоминания пользователя.
19. Настройка порядка элементов
ОбъектСНастраиваемымПорядком .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, для которых необходимо настраивать порядок элементов. Перечислить типы этих объектов в свойстве Тип . Подробную инструкцию по настройке см. в разделе Настройка порядка элементов.
20. Печать ОбъектСОсновнымиПечатнымиФормами .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, в которых должны использоваться основные печатные формы. Например, документ Реализация.
21. Печать ПолучательПечатныхФорм . При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть сопоставлены получателям основных печатных форм. Например, справочник Контрагенты.
22. Пользователи Подразделение ; ФизическоеЛицо .
При первом внедрении:
Принять решение о необходимости использования реквизитов Подразделение и ФизическоеЛицо справочника Пользователи .
Указать ссылки на соответствующие справочники в определяемых типах.
23. Пользователи
ВнешнийПользователь ; ВнешнийПользовательОбъект ; Пользователь .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть сопоставлены внешним пользователям системы. Например, справочники Физические лица, Сотрудники, Партнеры. Перечислить допустимые типы внешних пользователей в составе типов (в состав типа Пользователь также входит тип СправочникСсылка.Пользователи ).
24. Работа с файлами
ВладелецФайлов ; ПрисоединенныйФайл ; ПрисоединенныйФайлОбъект ; ВладелецПрисоединенныхФайлов ; ВладелецПрисоединенныхФайловОбъект .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны содержать присоединенные файлы («объекты с файлами»). Перечислить типы этих объектов в свойстве Тип .
Инструкцию по настройке см. в разделе Работа с файлами.
25. Рассылка отчетов ПолучательРассылки .
При первом внедрении:
Определить возможных получателей рассылки. Для этих объектов должна вестись контактная информация об адресах электронной почты. Перечислить типы получателей рассылки в свойстве Тип .
26. Свойства ВладелецДополнительныхСведений . При первом внедрении:
Принять решение по поводу состава объектов, в которых должна использоваться подсистема (составить список «объектов с дополнительными сведениями»). Указать в свойстве Тип ссылки на объекты, в которых будет использоваться подсистема
свойств («объекты с дополнительными сведениями»).
Инструкцию по настройке см. в разделе Свойства.
27. Шаблоны сообщений
ПредметШаблонаСообщения ; ВладелецШаблонаСообщения .
При первом внедрении:
Принять решение по поводу состава объектов, которые должна использовать подсистема (определить предметы и владельцев шаблонов сообщений). Перечислить типы этих объектов в свойстве Тип .
Инструкцию по настройке см. в разделе Шаблоны сообщений.
28. Управление доступом
ВладелецНастроекПрав ; ВладелецНастроекПравОбъект ; ВладелецЗначенийКлючейДоступа ; ВладелецЗначенийКлючейДоступаДокумент ; ВладелецЗначенийКлючейДоступаНаборЗаписей ; ВладелецЗначенийКлючейДоступаНаборЗаписейРегистраРасчета ; ВладелецЗначенийКлючейДоступаОбъект ; ЗначениеДоступа ; ЗначениеДоступаОбъект ; ПолеРегистраКлючейДоступаКРегистрам ; ВладелецНаборовЗначенийДоступаОбъект ; ВладелецСОграничениемПоНаборамЗначенийДоступаОбъект ; ВладелецВнешнихЗначенийВНаборахЗначенийДоступаОбъект .
При первом внедрении выполнить настройку в соответствии с описанием в разделе Управление доступом. При каждом обновлении убедиться, что состав типов включает в себя все поставляемые типы.
29. Учет оригиналов первичных документов
ОбъектСУчетомОригиналовПервичныхДокументов ; Сотрудник.
При первом внедрении:
Принять решение по поводу состава объектов, которые должна использовать подсистема. Перечислить типы этих объектов в свойстве Тип . Указать ссылки на соответствующие справочники в определяемом типе Сотрудник .
Инструкцию по настройке см. в разделе Учет оригиналов первичных документов.
Общие формы
№ Подсистема Название объекта Инструкция
1. Отправка SMS Общая форма НастройкаОтправкиSMS . При первом внедрении поместить в командный интерфейс.
Общие команды
Фильтр подсистем
Фильтр подсистем
1. Обмен данными
Синхронизировать ; СинхронизироватьСДополнительнымиПараметрами ; НастройкиПодключения ; ЗагрузитьКомплектПравил ; ЗагрузитьПравилаКонвертацииОбъектов ; ЗагрузитьПравилаРегистрацииОбъектов ; ПолучитьНастройкиСинхронизацииДляДругойПрограммы ; СценарииСинхронизации ; СобытияОтправки ; СобытияПолучения ; СоставОтправляемыхДанных ; УдалитьНастройкуСинхронизации .
При первом внедрении настроить согласно инструкции по настройке в разделе Обмен данными.
2. Структура подчиненности
СвязанныеДокументы .
При первом внедрении установить свойство Тип параметра команды для тех документов, справочников и ПВХ, которые предполагается выводить в отчет Структура подчиненности.
3. Управление доступом
НастроитьПрава , свойство Тип параметра команды.
При первом внедрении выполнить настройку в соответствии с описанием в разделе Управление доступом. При каждом обновлении убедиться, что состав типов включает состав поставляемых типов.
4. Учет оригиналов первичных документов
ЖурналУчетаОригиналовПервичныхДокументов . При первом внедрении настроить согласно инструкции по настройке в разделе Учет оригиналов первичных документов.
Общие макеты
№ Подсистема Название объекта Инструкция
1. Обновление версии ИБ
ОписаниеИзмененийСистемы . При первом внедрении создать макет согласно разделу Обновление версии ИБ и в дальнейшем при разработке конфигурации сопровождать его
Справочники
Фильтр подсистем
Фильтр подсистем
1. Бизнес-процессы и задачи
РолиИсполнителей .
При первом внедрении создать необходимый набор предопределенных элементов ролей исполнителей бизнес-процессов, предусмотренных в конфигурации. Инструкцию по настройке см. в разделе Бизнес-процессы и задачи.
2. Валюты Валюты . При первом внедрении поместить справочник Валюты в командный интерфейс. Подробнее см. в
разделе Валюты.
3. Контактная информация
ВидыКонтактнойИнформации .
При первом внедрении, если требуется, создать необходимый набор предопределенных элементов справочника исходя из потребностей конфигурации. Инструкцию по настройке см. в разделе Контактная информация.
4. Оценка производительности
КлючевыеОперации .
Если принято решение использовать предопределенные элементы, то при первом внедрении создать необходимый набор предопределенных элементов и произвести первоначальное заполнение реквизитов из формы списка. См. также дополнительные инструкции в разделе Оценка производительности.
5. Пользователи
ВнешниеПользователи , команда ВнешнийДоступ , свойство Тип параметра
команды.
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны быть сопоставлены внешним пользователям системы. Например, справочники Физические лица, Сотрудники, Партнеры. Перечислить допустимые типы внешних пользователей в составе типов (в состав типа Пользователь также входит тип СправочникСсылка.Пользователи ).
6. Свойства НаборыДополнительныхРеквизитовИСведений .
При первом внедрении создать необходимый набор предопределенных элементов для каждого «объекта со свойствами» в формате Тип_Имя . Например, Справочник_ФизическиеЛица для справочника ФизическиеЛица . Инструкцию по настройке см. в разделе Свойства.
Журналы документов
№ Подсистема Название объекта Инструкция
1. Защита персональных данных
СогласияНаОбработкуПерсональныхДанных . Если не используется подсистема Настройки программы, то при первом внедрении разместить в командном интерфейсе.
Отчеты
№ Подсистема Название объекта Инструкция
1. Защита персональных данных
СогласияНаОбработкуПерсональныхДанныхДействующие ; СогласияНаОбработкуПерсональныхДанныхИстекающие .
Если не используется подсистема Настройки программы, то при первом внедрении разместить в командном интерфейсе.
Обработки
Фильтр подсистем
Фильтр подсистем
Фильтр подсистем
1. Информация при запуске
ИнформацияПриЗапуске .
Для макетов обработки при первом внедрении:
Принять решение по поводу состава страниц с информацией, которые должны выводиться при запуске программы. Загрузить страницы в макеты обработки согласно инструкции к подсистеме.
2. Настройки программы ПанельАдминистрированияБСП .
При каждом обновлении:
Если в форму панели были добавлены свои объекты или внесены изменения, то выполнять сравнение/объединение всех форм обработки для выяснения состава дополнений и изменений в поставке библиотеки.
3. Оценка производительности
ОценкаПроизводительности . Если не используется подсистема Настройки программы, то при первом внедрении разместить в командном интерфейсе.
Планы видов характеристик
№ Подсистема Название объекта Инструкция
1. Анкетирование ВопросыДляАнкетирования .
При первом внедрении:
Принять решение по поводу состава объектов конфигурации, которые должны указываться в качестве ответов на вопросы анкеты (определить состав «типов ответов»).
Добавить допустимые типы ответов в состав типов свойства Тип значения.
2. Бизнес-процессы и задачи
ОбъектыАдресацииЗадач .
При первом внедрении:
Указать в свойстве Тип плана видов характеристик, а также в свойстве Тип предопределенного элемента ВсеОбъектыАдресации этого плана видов характеристик все
типы «объектов адресации». Создать необходимый набор предопределенных элементов для объектов адресации (инструкцию по настройке см. в разделе Бизнес-процессы и задачи).
3. Свойства ДополнительныеРеквизитыИСведения .
При первом внедрении указать возможные типы значений свойств. Состав типов данных может быть расширен любыми типами объектов метаданных конфигурации. Инструкцию по настройке см. в разделе Свойства.
Бизнес-процессы
№ Подсистема Название объекта
Инструкция
1. Бизнес-процессы и задачи
Задание . При первом внедрении в свойстве Вводится на основании указать ссылки на объекты метаданных, по которым необходимо создавать задания (предметы задач). Инструкцию по настройке см. в разделе Бизнес-процессы и задачи.
Удаление лишних связей с неиспользуемыми подсистемами
Некоторые объекты библиотеки могут поставляться по умолчанию уже настроенными для работы с другими подсистемами библиотеки. В этом случае необходимо оставить в них только те блоки кода, которые относятся к внедряемым подсистемам. Блок кода, относящийся к той или иной подсистеме, отмечается начальным и конечным комментариями:
// <ПутьКПодсистеме> … // Конец <ПутьКПодсистеме>
Например, если в конфигурацию не была внедрена подсистема Адресный классификатор, то необходимо удалить все фрагменты кода,
Фильтр подсистем
Фильтр подсистем
… // Конец СтандартныеПодсистемы.АдресныйКлассификатор
Или, например, если в конфигурацию не была внедрена подсистема Пользователи в модели сервиса, то необходимо удалить все фрагменты кода, отмеченные комментариями:
// СтандартныеПодсистемы.РаботаВМоделиСервиса.ПользователиВМоделиСервиса … // Конец СтандартныеПодсистемы.РаботаВМоделиСервиса.ПользователиВМоделиСервиса
Для массового удаления фрагментов кода подсистем, которые не используются в конфигурации, можно воспользоваться обработкой ПервоеВнедрениеБСП.epf . Перед ее запуском может также потребоваться:
закомментировать код модулей управляемого и обычного приложений, а также модуля сеанса – для возможности запуска обработки; включить возможность изменения в настройках поддержки для библиотечных объектов.
Довнедрение подсистем
Библиотека подразумевает выборочное внедрение большинства подсистем в конфигурацию. В любой удобный момент времени после первого внедрения библиотеки можно довнедрить необходимые подсистемы. Для этого повторите шаги 1-3 сценария первого внедрения, отметив с помощью обработки ПервоеВнедрениеБСП.epf недостающие подсистемы, и сохраните файл настроек сравнения/объединения для конфигуратора. При этом также будут автоматически отмечены зависимые и ранее внедренные подсистемы (т.к. при первоначальном внедрении из них могли быть удалены части кода, необходимые для внедряемых подсистем).
Особенности обновления на конкретную версию библиотеки
Особенности обновления каждой конкретной версии библиотеки описаны в сопроводительном документе updateSSL.htm, входящем в поставку библиотеки. При обновлении через несколько версий необходимо последовательно выполнить все шаги, описанные в этом документе, начиная с самой младшей версии.
Увеличение номера версии конфигурации
После завершения внедрения (обновления) библиотеки в конфигурацию следует увеличить номер версии конфигурации. Это необходимо для того, чтобы выполнились все процедуры обновления данных информационной базы, предусмотренные в новой версии библиотеки. См. также раздел Обновление вспомогательных данных во время разработки.
Контроль корректности внедрения и обновления
Рекомендуется выполнить следующие контрольные процедуры:
1. Проверить конфигурацию с установленным флажком Расширенная проверка (конфигуратор – меню Конфигурация – Проверка конфигурации).
2. Запустить конфигурацию в режиме обновления с предыдущей версии, а также в режиме первоначального заполнения (на «пустой» информационной базе).
3. Воспользоваться специальным инструментом – внешней обработкой ПроверкаВнедренияБСП.erf из дистрибутива библиотеки.
С помощью этих процедур можно быстро выявить проблемы несовместимости, связанные с объектами библиотеки, которые были переименованы или удалены в новой версии библиотеки, а также различные ошибки из-за человеческого фактора, связанные с ручными операциями при внедрении (обновлении). Кроме того, помощник внедрения позволяет выявить несоответствия между запланированным и фактическим объемом внедрения библиотеки в конфигурацию.
Внедрение подсистем библиотеки в объекты конфигурации и разработка ролей
Некоторые подсистемы предназначены для внедрения непосредственно в объекты конфигурации-потребителя и поэтому предполагают тесную интеграцию с объектами конфигурации. Для этого в соответствующих разделах главы 3 Настройка и использование подсистем при разработке конфигурации предусмотрены отдельные инструкции.
Там же даны рекомендации по настройке прав доступа пользователей. В большинстве случаев подсистемы предоставляют готовый набор ролей к своим объектам. Однако могут быть случаи, когда разработка системы ролей, в том числе настройка ролей конфигурации для объектов, поставляемых библиотекой, остается за разработчиком конфигурации.
Разработка справочной информации к объектам библиотеки
Большинство объектов библиотеки не содержат справочной информации, поскольку ее содержимое сильно зависит от специфики конфигурации-потребителя. Справочную информацию к объектам библиотеки следует разрабатывать непосредственно в конфигурации.
Использование в конфигурации
Для использования большинства подсистем библиотеки достаточно выполнить инструкции по внедрению и настройке, вывести в командный интерфейс объекты подсистем и выполнить тесную интеграцию с объектами конфигурации.
программного интерфейса содержится в исходных текстах самой библиотеки. Описание дополнительных возможностей подсистем для разработчиков также можно найти в подразделах Использование при разработке конфигурации главы 3.
Весь исходный код библиотеки распространяется по лицензии Attribution 4.0 International (CC BY 4.0). Текст лицензии доступен по ссылке. Эта лицензия позволяет вам использовать, распространять, перерабатывать, исправлять и развивать библиотеку в любых, в том числе, в коммерческих целях, при обязательном условии указания авторства библиотеки в вашем программном продукте. См. также: Ответы на типовые вопросы по лицензированию «1С:Предприятия 8».
Быстрое начало разработки с «нуля»
Короткая инструкция для быстрого начала разработки собственной конфигурации на базе 1С:Библиотеки стандартных подсистем (БСП). В ней описаны только обязательные действия, которые необходимы для первого запуска разрабатываемого решения. Полный список действий см. в главе 2.
Подготовка
1. Определиться со списком внедряемых подсистем. В самом простом случае внедряются все подсистемы библиотеки. Рекомендуется воспользоваться обработкой ПервоеВнедрениеБСП из комплекта поставки, которая позволяет выбрать подсистемы для внедрения с учетом их зависимостей друг от друга.
2. После определения состава подсистем нажать Сохранить настройки для конфигуратора и задать имя файла для сохранения настроек. 3. Создать новую пустую базу.
Сравнение, объединение
1. Вызвать меню Конфигурация – Сравнить, объединить с конфигурацией из файла. 2. Выбрать файл 1Cv8.cf из поставки библиотеки. 3. На предложение выполнить полную загрузку конфигурации ответить Нет. 4. На предложение постановки на поддержку ответить Да. 5. Выбрать Действия – Загрузить настройки из файла. Указать файл, сохраненный на шаге 2 этапа Подготовка. 6. Затем нажать Выполнить. 7. Если возникло окно с информацией о наличии неразрешенных ссылок, то сообщения в этом окне нужно пропустить, нажмите кнопку
Продолжить. Это окно возникает в случае внедрения не всех подсистем библиотеки. См. пример в Внедрение подсистемы «Обмен данными» без подсистемы «Работа с почтовыми сообщениями».
8. В окне Настройка правил поддержки нажать Ок.
Действия после сравнения, объединения
1. Установить в свойствах конфигурации имя конфигурации, например, МояКонфигурация . 2. Установить в свойствах конфигурации номер версии разрабатываемой конфигурации. Например, при начале разработки конфигурации
можно установить 1.0.1.1 в качестве номера версии. 3. Скопировать общий модуль ОбновлениеИнформационнойБазыБСП . 4. Заменить в названии скопированного модуля на имя или сокращение имени конфигурации (например, ОбновлениеИнформационнойБазыМК ). 5. Заменить текст модуля на:
Процедура ПриДобавленииПодсистемы(Описание) Экспорт Описание.Имя = "МояКонфигурация"; Описание.Версия = "1.0.1.1"; // Требуется библиотека стандартных подсистем. Описание.ТребуемыеПодсистемы.Добавить("СтандартныеПодсистемы"); КонецПроцедуры Процедура ПриДобавленииОбработчиковОбновления(Обработчики) Экспорт КонецПроцедуры Процедура ПередОбновлениемИнформационнойБазы() Экспорт КонецПроцедуры Процедура ПослеОбновленияИнформационнойБазы(Знач ПредыдущаяВерсия, Знач ТекущаяВерсия, Знач ВыполненныеОбработчики, ВыводитьОписаниеОбновлений, МонопольныйРежим) Экспорт КонецПроцедуры Процедура ПриПодготовкеМакетаОписанияОбновлений(Знач Макет) Экспорт КонецПроцедуры Процедура ПриДобавленииОбработчиковПереходаСДругойПрограммы(Обработчики) Экспорт КонецПроцедуры Процедура ПриОпределенииРежимаОбновленияДанных(РежимОбновленияДанных, СтандартнаяОбработка) Экспорт КонецПроцедуры Процедура ПриЗавершенииПереходаСДругойПрограммы(Знач ПредыдущееИмяКонфигурации, Знач ПредыдущаяВерсияКонфигурации, Параметры) Экспорт КонецПроцедуры
6. Включить возможность внесения изменений в модуль ПодсистемыКонфигурацииПереопределяемый и в процедуру ПриДобавленииПодсистем
вставить строчку:
МодулиПодсистем.Добавить("ОбновлениеИнформационнойБазыМК");
указав имя модуля, созданного на шаге 4. 7. Выполнить первый запуск. Убедиться в отсутствии ошибок при начальном заполнении.