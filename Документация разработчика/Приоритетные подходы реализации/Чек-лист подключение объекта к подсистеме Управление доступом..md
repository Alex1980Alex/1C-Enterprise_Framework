Все объекты метаданных, для которых описана логика ограничения, необходимо указать в процедуре
гкс_УправлениеДоступом.ПриЗаполненииСписковСОграничениемДоступа 
и
гкс_УправлениеДоступом.ПриЗаполненииВидовОграниченийПравОбъектовМетаданных
Для выбранных объектов метаданных необходимо вставить в модуль формы объекта
в процедуру обработчика события ПриЧтенииНаСервере вызов: УправлениеДоступом.ПриЧтенииНаСервере(ЭтотОбъект, ТекущийОбъект);
в процедуру обработчика события ПослеЗаписиНаСервере вызов: УправлениеДоступом.ПослеЗаписиНаСервере(ЭтотОбъект, ТекущийОбъект, ПараметрыЗаписи);
 Прописать ограничения для объекта в права ролей. Примеры с текстом шаблонов ограничений скопировать из роли ИзменениеУчастниковГруппДоступа
Примеры текста ограничений на Чтение для вида доступа Организации
Для справочников:
#Если &ОграничениеДоступаНаУровнеЗаписейУниверсально #Тогда
#ДляОбъекта("")
#Иначе
#ПоЗначениям( "Справочник.<ИмяСправочника>","Чтение","",
"Организации","<ИмяРеквизитаСодержащегоДанныеПоОрганизации>","","","","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","" )
#КонецЕсли

Для документов:#Если &ОграничениеДоступаНаУровнеЗаписейУниверсально #Тогда
#ДляОбъекта("")
#Иначе
#ПоЗначениям( "Справочник.<ИмяДокумента>","Чтение","",
"Организации","<ИмяРеквизитаСодержащегоДанныеПоОрганизации>","","","","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","" )
#КонецЕсли

Для регистра накопления:
#Если &ОграничениеДоступаНаУровнеЗаписейУниверсально #Тогда
#ДляРегистра("ИдентификаторыОбъектовМетаданных.РегистрНакопления<ИмяРегистра>", "<ИмяПоляСодержащегоДанныеПоОрганизации>", "", "", "", "")
#Иначе
#ПоЗначениям( "РегистрНакопления.<ИмяРегистра>","Чтение","",
"Организации","<ИмяПоляСодержащегоДанныеПоОрганизации>",
"","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","" )
#КонецЕсли

Для регистра сведений:
#Если &ОграничениеДоступаНаУровнеЗаписейУниверсально #Тогда
#ДляРегистра("ИдентификаторыОбъектовМетаданных.РегистрСведений<ИмяРегистра>", "<ИмяПоляСодержащегоДанныеПоОрганизации>", "", "", "", "")
#Иначе
#ПоЗначениям( "РегистрСведений.<ИмяРегистра>","Чтение","",
"Организации","<ИмяПоляСодержащегоДанныеПоОрганизации>",
"","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","", "","" )
#КонецЕсли

Если данные по организации являются реквизитом одного из полей, для стандартного варианта ограничений необходимо использовать шаблон ПоЗначениямРасширенный.
Например для РН.гкс_МатериальныйПоток Организация свляется реквизитом измерения АналитикаРазмещения, тогда ограничение на чтение выглядит так:

#Если &ОграничениеДоступаНаУровнеЗаписейУниверсально #Тогда
#ДляРегистра("ИдентификаторыОбъектовМетаданных.РегистрНакоплениягкс_МатериальныйПоток", "АналитикаРазмещения", "", "", "", "")
#Иначе
#ПоЗначениямРасширенный( "РегистрНакопления.гкс_МатериальныйПоток", "Чтение", "",
"ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.гкс_АналитикаРазмещения КАК Т1
ПО Т.АналитикаРазмещения = Т1.КлючАналитики",
"",
"Организации","Т1.Организация",
"", "", "", "", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","", "","","" )
#КонецЕсли
Имена регистров с ограничениями доступа необходимо указать в качестве предопределенных элементов справочника ИдентификатораОбъектовМетаданных как полное имя метаданных без точки-разграничителя:
РегистрНакоплениягкс_МатериальныйПоток
В модуль менеджера объекта вставить процедуру ПриЗаполненииОграниченияДоступа, описывающую логику ограничений доступа
#Область ДляВызоваИзДругихПодсистем

Процедура ПриЗаполненииОграниченияДоступа(Ограничение) Экспорт

Ограничение.Текст =
"РазрешитьЧтениеИзменение
|ГДЕ
| ЗначениеРазрешено(Организация)";

КонецПроцедуры

#КонецОбласти


Для РН.гкс_МатериальныйПоток текст процедуры будет выглядеть так:
Процедура ПриЗаполненииОграниченияДоступа(Ограничение) Экспорт

Ограничение.Текст =
"РазрешитьЧтениеИзменение
|ГДЕ
| ЗначениеРазрешено(АналитикаРазмещения .Организация)";

КонецПроцедуры

Включить объект в определяемые типы
ВладелецЗначенийКлючейДоступа - Все ссылочные объекты с ограничением доступа
ВладелецЗначенийКлючейДоступаОбъект - Все ссылочные объекты (кроме документов) из определяемого типа ВладелецЗначенийКлючейДоступа
ВладелецЗначенийКлючейДоступаДокумент - Все документы из определяемого типаВладелецЗначенийКлючейДоступа
ВладелецЗначенийКлючейДоступаНаборЗаписей - Все регистры с ограничением (кроме регистров расчета)
ПолеРегистраКлючейДоступаКРегистрам - Все типы собственных полей регистра, указанных в ограничении доступа к ним (типы опорных полей - аналог ссылки у объекта). Например для РС.ДанныеТранспортногоДокумента это тип Документ.гкс-ТранспортныйДокумент
Подробное описание подключения объектов к подсистеме см на ИТС. Настройка подключения объектов к подсистеме Управление доступом

После добавления объекта с использованием РЛС необходимо проверить правильность встраивания объекта в подсистему "Управление доступом" с помощью отчета ПроверкаВнедренияБСП.erf (отчет включен в поставку БСП). Подробнее см. на ИТС

